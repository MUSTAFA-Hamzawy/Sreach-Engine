[http cookie（エイチティーティーピークッキー、単にクッキー (cookie)とも表記される）は、マジッククッキーの一種であり、rfc 6265などで定義されたhttpにおけるウェブサーバとウェブブラウザ間で状態を管理する通信プロトコル、またそこで用いられるウェブブラウザに保存された情報のことを指す。ユーザ識別やセッション管理を実現する目的などに利用される。, httpは元来ハイパーテキストにおいて単にファイル転送を行うために開発されたため、同じurlへのアクセスならその状況によらず同一の資源[1]を提供することが前提となっている。動的なコンテンツ生成の仕組みとしてフォームが導入されているが、これは要求に直接対応する応答だけに影響をおよぼす。言い換えるとhttpでは、同じ瞬間に同じ内容の要求を行っていれば、そのクライアントが以前にどのような通信を行っていても区別されない。httpはその意味で現在においてもステートレスなプロトコルである。, その一方でworld wide webが普及するにつれ、状況によって異なる内容のページを提供したい[2]というニーズが生まれた。そのようなニーズをhttpのみで満たすには、ipアドレスによって区別する、状態を表現したユニークなurlを生成するなどの方法がある。しかし、プライベートネットワークからのアクセスを区別できない、本来二度起きない状態が同じurlにアクセスすることで何度も発生する、セキュリティの問題などいずれも容易に解決できない欠点を抱えていた。, そこで、1994年にネットスケープコミュニケーションズ社によってクッキー[3] が提案・実装された。クッキーでは次のようにサーバとクライアント間の状態を管理する。, この仕組みによって、ステートレスなプロトコルであるhttp上でステートフルなサービスを実現する。ここで注意すべき点は、一度設定されたクッキーは、条件を満たす限り何度でも要求に組み込まれるという点である。htmlページの要求だけでなく、画像を含むすべての要求が対象となる。, その後クッキーは1997年にrfc 2109で初めて標準化され、2000年のrfc 2965、2011年のrfc 6265で更新された。2007年現在ほとんどのウェブサーバ、ウェブブラウザで利用可能である。, 前述の通り、http cookie には幾つか仕様があるが、ietfの標準化した rfc 2109 や rfc 2965 は、ネットスケープ仕様とexpires属性からmax-age属性への変更等互換性がないため、実際のウェブサイトではほとんど使われていない[4]。一方で、expires属性等で用いられる日付形式は仕様外の記述が氾濫しているうえ[5]、セキュリティ上の理由からhttponly属性やsecure属性等が事実上追加されており、長らく文書の存在しない状態が続いていたが、rfc 6265 はこれらの問題を解消することを意図して制定されている。, 2016年頃から、rfc 6265の改訂作業が行われている[6]。クッキープレフィックス（__secure-と__host-）、samesite属性の追加などが行われる予定で、すでにウェブブラウザでの実装も並行して進められている[7][8]。, クッキーの最も代表的な用途は、ショッピングサイトにおけるカートやログイン状態の管理である。また、ipアドレスによらないクライアントの識別を可能にするため、ウェブサイト運営者やインターネット広告配信業者などがユーザの詳細なアクセス履歴を取得する用途にも使われる。, クッキーは毎回送られるものであり、またhttpヘッダの一部なのでascii文字列になっている必要がある。そのためクッキーでデータを直接扱うよりも、セッションidを実装する手段として使うことが多い。この場合、実際のデータは、セッションidをキーとしてサーバが保持することになる。, 例えば特定のページの表示回数を、ウェブページ上に表示したいときには、おおむね次のようなやりとりが行われる。, 例として、mediawikiにおけるクッキーの使用をあげる。, mediawikiソフトウェアでは、ログイン情報をクッキーで実現している。その方法はおおむね次のようである。, クッキーは、html domの一部としてアクセスできる。javascriptをはじめとする、クライアント側のスクリプトは、クッキーを操作することができる。ただし後述のようにクッキーには有効範囲が設定されており、そのurlにおいて有効なクッキーだけがアクセス対象となる。, 現在使われているウェブブラウザのほとんどはクッキーの送受信が可能であり、初期状態でクッキーを送受信する設定になっている。しかし、クッキーの送受信をするしない、またそのクッキーの内容は、ウェブ閲覧者の自由に置かれるべきものであるので、ブラウザの初期設定でそれらを操作できるようになっている。すなわち、クッキーの送受信を停止する、クッキーの内容を確認する、クッキーを消去するといった機能がウェブブラウザに備わっている。, クッキーを設定する際、どの要求に対してクッキー情報を送り返すのか、urlの範囲を指定する。規定値は、クッキーを設定したサーバに対するすべての要求であり、対象を広げることも狭めることもできる。ただし広げる場合でも、トップレベルドメインより狭い範囲でなければならない。, またクッキーの有効期限は、通常はブラウザを終了するまでだが、指定した期限まではブラウザを再度起動しても保持されるように設定することができる。有効期限の情報も、サーバからブラウザにクッキー情報を送信する段階で付加される。 無期限という設定は出来ない。遥か未来を指定することで半永久的に有効にすることも可能だが、ブラウザやサーバが2038年問題で不具合を起こす場合があることから[9]、2038年1月19日3時14分07秒(utc)以降の時間を期限とすることはあまりない。, クッキーでセッション管理を行う場合、もし第三者がセッションidを知ることができれば、そのidを名乗ることで本来のユーザになりすますことができる。このような「なりすまし」行為をセッションハイジャックと呼ぶ。, 例として、以下のような通信を行うシステムがあるとする。, もし第三者がセッションidを知ることができれば、そのセッションが有効な間だけとはいえ、1～2を飛ばして3から開始することができる。すなわち、パスワードを知らなくても「なりすまし」が可能となる。, 第三者のクッキー情報を知る方法のひとつは盗聴である。盗聴を防ぐ手段としてtlsがある。ただしここで、クッキーは有効範囲内のすべての要求に対して自動的に付加されることに注意する必要がある。sslでクッキー情報を暗号化しているつもりでも、有効範囲の設定によっては、sslを利用しない要求にもクッキーが付加される可能性がある。情報処理推進機構は2003年8月に、この点に関する注意喚起[10]を行った。, クロスサイトスクリプティングも、クッキー情報を不正に得る手段として使われる場合がある。クッキーには有効範囲が設定されているが、その有効範囲内にクロスサイトスクリプティング脆弱性を持つページがある場合、javascript等を併用して、他のサーバにクッキー情報を（urlの一部に組み込むなどして）送信させることが可能になる。, クッキーを使うと、そのユーザからの他の要求と関連付けることができる。, この手法は、アドネットワーク（google adsenseなど）を利用するウェブ広告業者がよく用いる。インターネット広告の配信において、バナー広告は、業者のサーバ（サードパーティー）へのリンクを介して画像を取得する形式が一般的である。前述のとおりクッキーはhtmlに限らず、画像にも設定することができる。httpではリンク元のurl情報も送信することが一般的なので、結果として広告業者は、同社を利用するすべてのサイトを対象としてそのユーザのアクセス履歴を把握することが可能になる。詳細はcookieとスパイウェアの関係も参照。ユーザのアクセス履歴を追跡するという意味からトラッキング・クッキーと呼ばれたり、メインのhtmlではなく画像の提供元が設定するという意味からサードパーティー・クッキーと呼ばれたりする。これらは、行動ターゲティング広告やコンテンツ連動型広告および検索連動型広告などに活用され、時にフィルターバブルの原因ともなっているが、今後federated learning of cohortsに移行する動きがある。, これをプライバシーの侵害と考える人も、そう考えない人もいる。このようなクッキーを設定したくないユーザのために、クライアント向けセキュリティ対策ソフトの多くは、トラッキング・クッキーを検出・除去する機能を備えている[11][12]。しかし、すべてのユーザにその影響が正しく理解されているとは限らず、コンピュータウイルスと誤解して初心者が驚くといった状況も散見される。, ウェブサイト作成者はクッキーを用いなくても、サードパーティーのgoogle analytics等を使うことでipアドレス・ユーザーエージェント・ウェブビーコン・httpリファラなどを利用してアクセス解析をおこないウェブ トラッキング（英語版）をすることが可能である。javascriptおよびhtml5（webgl、canvas要素、webフォントなど）を用いたその他の手法についてはフィンガープリントも参照。, またadobe flashで使われるlocal shared object（フラッシュ・クッキーとも呼ばれる）、html5（インストール済みのwebフォントなど）やsilverlightの保存領域、faviconなどを利用してクッキーと同様のトラッキングをすることが可能である。ユーザには非常に気づかれにくい上に、クッキーが拒否あるいは削除されてもそれらの情報から容易に生成・復元することもできる。これらを総称してzombie cookie（ゾンビ・クッキー）やsupercookie（スーパー・クッキー）などと呼ばれる[13]。, 問題になり始めた2011年現在では一般的なウェブブラウザやセキュリティソフトウェアの多くはこれに対処できておらず、防止や除去のためにはサードパーティー製ブラウザアドオンの使用とjavascriptの制御や無効化、ウェブブラウザのプライバシーモードやccleanerを用いたキャッシュおよび閲覧履歴の完全な削除などの対策が必要である。なお、tor browserやonion browserに関しては、いまのところウェブトラッキングやキャンバス・フィンガープリンティングなどの回避に有効[14]である。][http cookie, 目次, 概要[編集], 仕様間の違い[編集], 用途[編集], 例[編集], 例：mediawikiにおけるログイン情報[編集], クライアント側スクリプトによるクッキーの操作[編集], ブラウザの環境設定によるクッキーの操作[編集], クッキーの適用範囲と有効期限[編集], セキュリティ、プライバシーの問題[編集], セッションハイジャック[編集], トラッキング・クッキー[編集], 類似のトラッキング技術[編集], 脚注[編集], 関連項目[編集], 外部リンク[編集], 案内メニュー, 検索]http cookie - wikipedia[][持続的接続, 圧縮（英語版）, https, http/2, http/3, options, get, head, post（英語版）, put, delete, trace, connect, patch（英語版）, cookie, etag, location（英語版）, リファラ, dnt（英語版）, x-forwarded-for, 301 moved permanently（英語版）, 302 found, 303 see other（英語版）, 403 forbidden, 404 not found, 451 unavailable for legal reasons, 503 service unavailable, basic認証, digest認証, httpヘッダ・インジェクション, httpリクエストスマグリング（英語版）, httpレスポンス分割（英語版）, httpパラメータ汚染（英語版）, 表, 話, 編, 歴, 1 概要, 2 仕様間の違い, 3 用途 3.1 例 3.2 例：mediawikiにおけるログイン情報, 3.1 例, 3.2 例：mediawikiにおけるログイン情報, 4 クライアント側スクリプトによるクッキーの操作, 5 ブラウザの環境設定によるクッキーの操作, 6 クッキーの適用範囲と有効期限, 7 セキュリティ、プライバシーの問題 7.1 セッションハイジャック 7.2 トラッキング・クッキー, 7.1 セッションハイジャック, 7.2 トラッキング・クッキー, 8 類似のトラッキング技術, 9 脚注, 10 関連項目, 11 外部リンク, ウェブサーバがウェブブラウザにその状態を区別する識別子をhttpヘッダに含める形で渡す。, ブラウザは次にそのサーバと通信する際に、与えられた識別子をhttpヘッダに含めて送信する。, サーバはその識別子を元にコンテンツの内容をユーザに合わせてカスタマイズし、ブラウザに渡す。必要があれば新たな識別子もhttpヘッダに含める。, ブラウザがサーバに閲覧を要求する。ここにはクッキーの情報はない。, サーバはブラウザに対し「1」回目というクッキー情報と、「1回目」と表示するようなデータを送信する。, ブラウザがサーバに閲覧を要求する。このときブラウザは、そのサーバから受け取ったクッキーを探して、「1」のクッキー情報をサーバに送信する。, サーバは「1」というクッキー情報に基づき、ブラウザに対し「2」回目というクッキー情報と、「2回目」と表示するようなデータを送信する。, ログインページからユーザ名とパスワードをサーバに送信する。この時点でクッキーは使われていない。, サーバは、ユーザ名とパスワードを確認し、ユーザーにカスタマイズされた「ログイン成功」のページを送信するとともに、ユーザー名とパスワードを（そのままではないが）クッキーとして送信する。, 次の閲覧からはブラウザがページ閲覧要求とともに先のクッキーを送信する。サーバはクッキー情報によってユーザにカスタマイズされたページを送信する。, ログアウトをクリックすると、「ログアウト」のページとともに、空のクッキー情報を送信する。ブラウザは、先のクッキー情報を空のクッキー情報で上書きする。これにより最初のクッキー情報は消去される。, トップページでユーザidとパスワードの入力を求める。, 認証に成功するとサーバはセッションidを割り当て、クッキーとしてクライアントに通知する。, クライアントは以降の要求にクッキーとしてセッションidを付加する。サーバは対応するセッション情報にアクセスし、どのユーザであるか識別する。, ^ ここで言う資源とは、html文書や画像、音声、などのコンテンツ全般を指す。, ^ ウィキペディアを例に挙げると、同じurlでもログインしていない場合はページの一番上が「ログインまたはアカウント作成」、している場合は「(ユーザ名) 自分の会話 個人設定 ウォッチリスト 自分の投稿記録 ログアウト」と表示が変化する。, ^ netscape communications corporation. “persistent client state http cookies” (英語). 2011年9月29日閲覧。, ^ dan winship. “2009-08-05-dan-winship.txt” (英語). 2011年9月29日閲覧。, ^ dan winship. “2009-08-11-dan-winship.txt” (英語). 2011年9月29日閲覧。, ^ draft-ietf-httpbis-rfc6265bis-06, ^ can i use: headers http header: set-cookie: cookie prefixes, ^ can i use: 'samesite' cookie attribute, ^ microsoft. “[iis]2038 年 1 月 19 日以降の有効期限のクッキーにおける asp 200 エラー” (日本語). 2008年6月16日閲覧。, ^ 情報処理推進機構. “経路のセキュリティと同時にセキュアなセッション管理を” (日本語). 2008年5月24日閲覧。, ^ symantec corporation. “システムの完全スキャンを実行するとトラッキング・クッキーのリスクが表示される” (日本語). 2008年6月15日閲覧。, ^ trend micro incorporated. “スパイウェア検索をすると「cookie_････」が多量に検出されるのですが、大丈夫ですか？” (日本語). 2008年6月15日閲覧。 [リンク切れ], ^ “アドネットワークは、常にあなたを監視している”. japan.internet.com. (2011年10月25日). http://japan.internet.com/wmnews/20111025/5.html 2011年10月26日閲覧。 , ^ fingerprint解説サイト - 明治大学 情報セキュリティ研究室, ダイナミックhtml, enterprise javabeans, セッション (コンピュータ), http strict transport security, hypertext transfer protocol, クロスサイト・クッキング, rfc 2965 - http state management mechanism, rfc 6265 - http state management mechanism, cookies: http state management mechanism （日本語訳）, 表, 話, 編, 歴, 比較（英語版）, 歴史（英語版）, 一覧 unix対応（英語版）, unix対応（英語版）, 年表, 利用シェア, 広告フィルタリング, オーグメントブラウジング（英語版）, ダウンロードマネージャ, cookies, dns over https, dnssec, favicon, インクリメンタルサーチ, ブックマーク ブックマークレット ライブブックマーク スマートブックマーク（英語版）, ブックマークレット, ライブブックマーク, スマートブックマーク（英語版）, ブラウザセキュリティ（英語版）, プライバシーモード, ブラウザシンクロナイザ（英語版）, タブブラウザ, ユニバーサル・エディット・ボタン（英語版）, プラグイン, エクステンション, acidテスト, cascading style sheets, html, html5, ocsp, svg, xhtml, webgl, websocket, webrtc, xmlhttprequest, javascript, mathml, world wide web, ウィジェット, リッチインターネットアプリケーション, site-specific browser, インターネットスイート, モバイルサイト, オフラインリーダー（英語版）, browserchoice.eu, pwn2own, iloo, マン・イン・ザ・ブラウザ, wpad, pac, http, http/2, http/3, https, tls/ssl, セキュア通信, tor, vpn, プロキシ, httpの持続的接続, httpパイプライン, spdy, alpn, xml, crl, htmlレンダリングエンジン, 推奨ブラウザ, ネットサーフィン, webサーバ, ブラウザ戦争, フルブラウザ, ネット検閲, ディープ・パケット・インスペクション, ブロッキング, コンテンツフィルタリング, アドブロック, インターネット広告, アドネットワーク, アクセス解析, ウェブビーコン, フィンガープリント, フィルターバブル, seo, brave, braver, chromium, dooble（英語版）, iridium（オランダ語版）, konqueror, otter browser, web, avant, blisk, dragon（英語版）, craving explorer2.x, chrome, icab, lunascape, maxthon, microsoft edge(version 79以降), opera (version 15以降), safari, sleipnir(version 4.0以降), srware iron, vivaldi, arora, falkon, flock (version 3.0以降), fluid（英語版）, midori, omniweb, rekonq, rockmelt, シイラ, origyn web browser, sputnik, swift, uzbl, webpositive, xombrero, avant, basilisk（英語版）, epic（英語版）, firefox, gnu icecat, lunascape, slimbrowser, seamonkey, tor browser, waterfox, at&t pogo, beonex communicator, camino, classilla, conkeror, cyberfox, flock (version 2.6.1以前), galeon, ghostzilla, k-meleon, 風博士, kirix strata, lotus symphony, mozilla, netscape, pale moon（旧バージョン）, sleipnir（2.x系,3.x系のversionのみ）, timberwolf（英語版）, xb browser, avant, lunascape, maxthon, aibrowser, aol explorer, conqueror browser, craving explorer1.x, deepnet explorer, donut(rapt,undonut), grani, greenbrowser, internet explorer, menubox, neoplanet, netcaptor, mediabrowser, microsoft edge(version 78以前), sleipnir(version 4.x系以前), spacetime（英語版）, ultrabrowser, webbie, zac browser, opera (version 12.18以前)▲, pale moon, elinks, emacs/w3▲, line mode browser▲, links, lynx, net-tamer▲, w3m, ほぼテキストブラウザ▲, abaco（英語版）, amaya, arachne（英語版）▲, arena（英語版）▲, beaker（英語版）, charon（英語版）, dillo, egbrowser▲, gazelle, ホームページリーダー▲, ibrowse▲, kidzui, mosaic-ck, mothra（英語版）▲, netpositive▲, netsurf, oregano（英語版）▲, vms mosaic▲, webboy▲, avast safezone browser, android標準ブラウザ, brave, google chrome for android, google chrome for ios, dolphin browser, icab mobile, ilunascape, microsoft edge, s60 web browser, onion browser（ios専用）, opera mobile(version 14以降), safari, silk, srware iron (for android), ニンテンドー3dsインターネットブラウザ, steel（英語版）, bolt（英語版）, opera coast, espial html5 browser, firefox for mobile, ilunascape, microb, minimo▲, orfox（android専用）▲, tor browser（version 8.5以降。orfoxの後継でandroid専用）, ilunascape, internet explorer mobile▲, microsoft edge（2020年まで）▲, ニンテンドーdsブラウザー, ニンテンドーdsiブラウザー, opera mobile(version 12以前), blazer（英語版）, deepfish▲, galio▲, ibisbrowser, iris browser, konqueror embedded, netfront, obigo browser, opera mini, skweezer, skyfire（英語版）, teashark, thunderhawk（英語版）, uc browser, uzard web, vision, winwap, smooz, google tv, netfront browser nx, steam overlay, espial html5 browser, kylo（英語版）, インターネットチャンネル, galio▲, msn tv (webtv), netfront, ▲印のブラウザは開発終了, カテゴリ, コモンズ, コンピュータ・ネットワーク・セキュリティ, hypertext transfer protocol, インターネットのプライバシー, world wide web, ハッキング (コンピュータ・セキュリティ), rfc, 外部リンクがリンク切れになっている記事/2012年7月, 出典を必要とする記事/2021年3月, 書きかけの節のある項目, コンピュータ関連のスタブ項目, 日本語版記事がリダイレクトの仮リンクを含む記事, rfcマジックリンクを使用しているページ, ログインしていません, トーク, 投稿記録, アカウント作成, ログイン, ページ, ノート, 閲覧, 編集, 履歴表示, メインページ, コミュニティ・ポータル, 最近の出来事, 新しいページ, 最近の更新, おまかせ表示, 練習用ページ, アップロード (ウィキメディア・コモンズ), ヘルプ, 井戸端, お知らせ, バグの報告, 寄付, ウィキペディアに関するお問い合わせ, リンク元, 関連ページの更新状況, ファイルをアップロード, 特別ページ, この版への固定リンク, ページ情報, このページを引用, ウィキデータ項目, ブックの新規作成, pdf 形式でダウンロード, 印刷用バージョン, コモンズ, afrikaans, العربية, azərbaycanca, беларуская (тарашкевіца), български, भोजपुरी, català, čeština, dansk, deutsch, ελληνικά, english, esperanto, español, eesti, euskara, فارسی, suomi, français, galego, עברית, हिन्दी, hrvatski, magyar, bahasa indonesia, íslenska, italiano, 한국어, кыргызча, limburgs, lombard, lietuvių, latviešu, മലയാളം, монгол, bahasa melayu, မြန်မာဘာသာ, nedersaksies, nederlands, norsk nynorsk, norsk bokmål, polski, português, română, русский, scots, srpskohrvatski / српскохрватски, simple english, slovenčina, slovenščina, shqip, српски / srpski, svenska, kiswahili, ไทย, türkçe, українська, tiếng việt, 吴语, ייִדיש, 中文, 粵語, 最終更新 2022年3月18日 (金) 17:22 （日時は個人設定で未設定ならばutc）。, テキストはクリエイティブ・コモンズ 表示-継承ライセンスの下で利用可能です。追加の条件が適用される場合があります。詳細は利用規約を参照してください。, プライバシー・ポリシー, ウィキペディアについて, 免責事項, モバイルビュー, 開発者, 統計, cookieに関する声明, , ]