[reinventing ed seems like a complete waste of time, until you realize that this program also acts as a browser - a browser embedded inside ed. you can edit a url as easily as a local file, and activate browse mode to render the html tags in a manner that is appropriate for a command-response program such as this. in other words, we discard most of the formatting information and retain the links and fill-out forms. this allows blind users to access the internet through an application that is compatible with the linear nature of speech or braille., if edbrowse is not included in your distribution, there is a perl version, with fewer features, that you can bring up right away on any computer: linux, unix, mac, windows, etc. give edbrowse.pl a try, and if you like it then you can git the package and build it from source to realize the full-featured c version., if you are a linux user, and your distribution doesn't package edbrowse, you can use the aforementioned perl version of course, but you can also run the full-featured c version without going through the hassle of building it yourself. statically-linked executables for 32 bit and 64 bit architectures are maintained on the edbrowse home page., this documentation assumes you are familiar with ed. in fact it helps if you are fluent in ed. experience with internet browsers and the associated terminology is also helpful., indo-european languages bring in more characters, such as ñ (spanish), è (french), and ö (german). these can still fit within single bytes, by setting the eighth bit to 1, according to the iso8859-1 standard. still other languages, such as czech and hungarian, fit within the iso8859-2 standard, which assigns different characters to the bytes above 127. and there is iso8859-3, and so on. select your code page, and all the letters of your language still fit within one byte. this is the iso8859 standard, and it is backward compatible with ascii. in other words, z is 122 in ascii and in every iso8859-x code page, but the higher numbers, above 127, could represent different letters in different languages., this worked well for a while, but what if you want to write one paragraph in french and one in czech? you either switch from iso8859-1 to iso8859-2 in mid stream, or we come up with a new standard that represents all letters in all languages simultaneously. this charset, which obviously will not fit into a single byte, is known as utf8, and it has become the new standard across the computer industry. software does not have to select an iso8859 page and map numbers to letters in a manner that depends on the country you live in. instead, ñ is represented by two bytes, not one. this is transparent to you; you see the same letter on the screen, and you hear the same sounds if your screen reader passes these letters to a speech synthesizer. a quick way to tell which system you are on is to echo $lang. if it ends in utf8 or utf-8, and it probably does, then your console is using utf8, and it expects two-byte sequences. your files probably contain these underlying sequences. older pre-utf8 systems store each character in a single byte, with an iso8859 codepage doing the translation., there's much more to say about charsets; this is merely a brief introduction. i need not go further, because edbrowse only supports iso8859-1 ⇔ utf8 at this time. chinese, for example, requires 3 and 4 byte sequences, which map into unicode. edbrowse doesn't handle this level of complexity at this time., the output and error messages, such as "search string not found", have been internationalized. set the environment variable lang to interact with edbrowse in your home language. supported languages are shown below. if you can translate edbrowse into additional languages, please contact the developers., english: lang=en (this is the default), french: lang=fr by erwin bliesenick including documentation, brazilian portuguese: lang=pt_br by cleverson casarin uliana, polish: lang=pl_pl by wojciech gac, german: lang=de by sebastian humenda, when an output or error message is displayed, accented letters are printed using single bytes, vectoring through an iso8859 page, unless the string utf8 or utf-8 appears in $lang, whence the nonascii characters are generated using utf8. lang=fr-fr.utf-8 is a common setting in france. similarly, the contents of a buffer, be it a local document or an internet website, are displayed as single bytes or multi-byte sequences, according to $lang. bear in mind, utf8 has become the standard, and edbrowse may not display text or error messages through iso8859 pages for long. in other words, iso8859 is deprecated., if an older file is read into edbrowse, i.e. read into an empty buffer, and that file is in iso8859, while your computer is set to run in utf8, then that file is converted on the fly before you ever see it. thus it will look normal to you. use the iu command to disable this feature., when you write data out to the same file, e.g. if you have made some corrections or additions, edbrowse converts it back to its original single-byte iso8859 charset. thus you can send the edited file back to your friend, and it will be in his charset as he expects. however, if you write the data, or any portion of that data, into a new file, it is left in the charset that is used by your computer., these conversions should never take place on zip files, or executable files, or other forms of binary data. if you see the words "converting to iso8859" or "converting to utf8", and the file is something other than international text, we have a problem. don't try to run the converted executable; it won't work., if your world is utf8, the search function can lead to some confusion. consider the spanish word niño, for a boy child. if you search for ni.o, you may not find this line of text. the dot stands for one character, and should match ñ, but this accented letter takes up two bytes. ironically, you have to search for ni..o, and you will find what you are looking for. needless to say, this is very confusing., search and substitute is performed by the pcre library, and fortunately, the latest version supports utf8. edbrowse passes pcre an option that tells it to treat certain two-byte sequences as single letters, and thus it behaves the way you want it to. searching for ni.o works again. if you want to disable utf8 search and substitute temporarily, use the su8 command., some websites offer their contents in multiple languages. for example, twitter.com has an english version, a french version, and so forth. it is possible to select the language when requesting the page. edbrowse supports this via the localizeweb keyword in its configuration file. for instance, the following entry in .ebrc indicates that you want the french version, when it is available., localizeweb = fr, exit the program, q : quit the current session qt : quit the program completely, whether you've written your files or not bw : buffer written; you can quit at any time !command : shell escape ! : interactive shell cd : change directory config : reread the config file, input, rl : use readline() on input (toggle), display lines in the buffer, p : print the current line 4,7p : print lines 4 through 7 +3p : advance 3 lines and print +3 : same as +3p, print is default command - : previous line --- : back up three lines 'a,'bp : print a range of lines marked with labels a and b kb : mark the current line as b l : list the current line, showing invisible chars and end markers eo : end markers off el : show end markers ^$ when a line is listed ep : show end markers when a line is listed or printed lna : expand all nonascii chars into hex when a line is listed (toggle) n : print the current line with its line number ll 1000 : line length 1000, show the first 1000 chars of each line z22 : print the next 22 lines z : print another 22 lines = : print the number of lines in the file .= : print the current line number b : find the line with the balancing brace b( : find the line with the balancing parenthesis, help messages, h : help, explain the last question mark h : show all error messages (toggle), search and substitute, s/x/y/ : replace x with y on the current line s/x/y : replace x with y and print the result s//y/ : use the last substitution string, in this case x s/x/%/ : use the last replacement string s : repeat the previous substitute command s/x/y/2 : replace the second instance of x with y on the current line 4,7s/x/y/g : replace all instances of x with y on lines 4 through 7 s, : replace comma space with newline, break line in two s. : replace period space with newline, break line in two s?2 : break line at the second question mark bl : break very long line into sentences and phrases /x/ : look for the line containing x /x : same as /x/ /x/i : look for the line containing x or x ?x? : look backwards for x ci : searches and substitutions are case insensitive cs : searches and substitutions are case sensitive sg : substitution strings are global across sessions sl : substitution strings are local to their sessions su8 : search and substitute uses utf8 character sequences (toggle) g/x/ p : print every line that has an x v/x/ p : print every line that does not have an x v/x/i l : list every line that does not have x or x lc : convert line to lower case mc : convert line to mixed case uc : convert line to upper case s/foo/uc : convert foo to foo on the current line s/foo/mc/g : convert foo to foo, but not foobar, files and sessions, f : print the name of the current file f foo : set the file name to foo f/ : retain only the lass component of the filename e : print the number of the current session e3 : move to session 3 e foo : edit the file named foo r foo : read the contents of foo into the current buffer w foo : write the current buffer to foo w+ foo : append to foo w/ : write to the lass component of the filename e ~/projects/edbrowse/src/buf*.c : expand wildcards if exactly one match e $ebsrc/buf*.c : variable expansion bfl : buffer list, all edbrowse sessions and their file names bd : binary detection on files (toggle) iu : automatically convert between iso8859 and utf8 (toggle), text editing, much like ed, u : undo the last command d : delete the current line 1,$d : delete all the lines, 1 through eof d : delete the current line and print the next line i : insert text before the current line, end with a period c : change the current line, enter a new block of text, end with period a : add text after the current line, end with a period a+ : include the line you just typed in, when you thought you were in append mode 4,7m11 : move lines 4 through 7 to line 11 4,7t11 : copy lines 4 through 7 to line 11 3,4j : join lines 3 and 4 together 3,4j : join lines 3 and 4 together with a space between, directory scan, dr : directory is readonly dw : directory is writable, and d moves files to your trash bin dx : directory is writable, and d deletes files hf : show hidden files in directory listing (toggle) lsl : list length of the file on the current line, directory mode only lss : list the approximate size of the file, in kilobytes, megabytes, etc lst : list the mod time of the file lsp : list owner group permissions lsi : list the inode lsk : list the number of hard links lsm : list major and minor number lsy : list path for a symbolic link ls : same as lsst ls=lt : display length and time of all files in subsequent directory scans ls= : just list the files in a directory scan, browse an html file or a web page, b : browse the current file, which is assumed to be in html b foo.html : edit the file foo.html and browse it b url : fetch url from the internet and browse it ub : unbrowse a file ft : show the title of the current web page fd : show the description of the current web page fk : show the keywords of the current web page rf : refresh the web page or directory listing et : edit this web page as pure text hr : http redirection (toggle) vs : verify ssl connections (toggle) sr : send referrer (toggle) ua3 : pretend to be the third user agent in your config file, ftp or http downloads, pdd : progress of download indicated by dots pdc : progress of download indicated by megabyte count pdq : progress of download quiet, no indicator fma : ftp mode active fmp : ftp mode passive bg : download files in background (toggle) bgl : list background downloads, complete or in progress, interact with a web page, g : go to the link on the current line g2 : go to the second link on the current line g$ : go to the last link on the current line ^ : the back key, go back to the web page you were looking at before i=xyz : set the input field on the current line to xyz i2=xyz : set the second input field on the current line to xyz i2* : push the second button on the current line, usually submit or reset i$* : push the last button on the current line i3? : describe the third input field on the current line m4 : move this web page to session 4 and return to the previous page js : allow javascript (toggle) xhr : allow xhr (toggle) rr : rerender the screen, to reflect asynchronous javascript changes, mail client, sm : send mail [account number] re : reply to a mail message rea : reply to all, plugins, pb : play buffer (typically audio) pb.mp3 : play the current buffer as an mp3 file pg : plugins active (toggle), database access, ds=source,login,password : set the data source sht : show tables shc : show columns (and primary key) for the current table shf : show foreign keys for the current table fbc : fetch blob columns (toggle), edbrowse functions, <foo arg1 arg2 … : invoke the function foo, defined in your .ebrc file x : silently make this the current line, often used in scripts, debug, db3 : set debug level, 0 through 9 db>/tmp/edbrowse.out : redirect debugging output to a file jdb : javascript debugger, dot to exit, if you want to read the entire file, type ,p. of course a large document will fly past your screen, but there's an easy way to step through page by page. start with 0z24 to get the first 24 lines. then the z command will give you the next 24, and the next 24, and so on. you may want to use 22, or 23, or whatever makes sense relative to your screen. another approach is to simply hit return, again and again, and proceed line by line., once you are use to regular expressions, you can jump to any part of the document, even a large document, in record time simply by searching for a unique text fragment. this comes with practice. if your search string is not unique, you may have to search two or three times to find the desired paragraph., if you want to mark certain lines of text, please don't try to remember the line numbers. use the k command to mark them. for example, use ka and kb to mark the start and end of a block of text, while kc marks the new location. the move command is then 'a,'bm'c - with absolutely no line numbers. this is standard ed fair., to look for links on a web page, search for the left brace. yes, you may stumble across a literal left brace in the text, but this doesn't happen very often. you might access a particular link by typing /{next}/g. similarly, you can look for input fields by searching for the less than sign. this will make sense as you read about the representation of web pages below. and of course, multiple operations can be scripted, an important feature of edbrowse., great! you've read the perlre man page, and you're back. here are a few changes that i've made to perl regular expressions. i have found that ( and ) are almost always meant to be literal, as in searching for myfunction(), so i reverse the sense of escaped parentheses in perl. that is, ( and ) now match the literal characters, and ( and ) are used to demark substrings of the matched text. these substrings are then referenced, in the replacement string, by $1 through $9. similarly, | means a literal |, and | is alternation. i also change the sense of &, on the right hand side, to mean what it means in ed. i leave ^ $ . [ ] + * ? and {m,n} alone, to be interpreted by perl, as described in the perlre man page. however, if * is the first character, it is treated as a literal star. this makes sense, as there is no previous character to modify. some versions of ed do this, some don't. this is convenient; when you want to replace * + or ? you don't have to escape it just because it is a modifier. similarly, an open bracket by itself is treated as literal. these changes to regular expressions, to look more like ed, may be confusing if you are a perl expert, however, these changes make this editor easier to use for everyone, especially the experienced ed users. below are some additional differences between this program and /bin/ed., lines beginning with # are ignored, making it easier to comment your edbrowse scripts. the # character has no special significance in the middle of a line., lines beginning with ! implement a shell escape. the ! character has no special significance in the middle of a line. the ! alone spawns an interactive subshell - type exit to return to edbrowse. the work "ok" is printed when the shell command is finished - thus you can tell when a no-output command is done., type `cd dirname' to change directories. the new directory is always printed. type cd alone to find out where you are., unlike bash, edbrowse does not retrace your steps back through symbolic links. thus .. is always the physical parent directory., if the string contains $ [] * ? or a leading ~, environment variables are expanded, and globbing is performed. thus cd ~/work takes you to the work directory under your home directory., this command does not change any filenames that may be active. you can edit foo, cd .., and write, and foo will be copied to the parent directory. that's probably not what you want, so be careful when changing directories., r operates on the current line by default, rather then the last line. use $r to read a file at the end of your working text., the w+ command appends to the file. some versions of ed use w> for this operation, but for 40 years > has been the industry standard for write with truncate, so using > for append is somewhat confusing. and w>> is just too clunky, so i use w+., w/ writes the data into a file whose name is the last component of the current file name. this is useful when you've just downloaded this.that.com/foo/bar/package-2.7.7-22.tar.gz, and you want to write the file locally, but don't want to retype the stuff at the end. alternatively, f/ changes the filename, keeping only the last component., whenever a file is read from or written to disk, $var, in the filename, is replaced with the corresponding environment variable. thus you can edit your address book at any time via `e $adbook', provided $adbook has been set in your environment. constructs such as ${foo}bar are supported. also, a leading ~/ is replaced with $home/, making it easy to edit files in your home directory such as ~/.profile. or use ~user for another user's home directory., shell meta characters are expanded, provided the result is one file name. you can read or write a file by typing a minimal portion of its name. neither $variables nor stars are expanded for files on the command line, as this expansion is already done for you by the unix shell. windows users should compile using the setargv.obj utility, which performs wildcard expansion on command line arguments. thus you should be able to edit *.c in any operating system and get all the c source files in the current directory., variable substitution and globbing of filenames can be completely suppressed by a leading backquote. if you really want to read a file called *a?, type r `*a?. you can escape an individual shell meta character with the backslash, as in fun*house., many versions of ed place a $ at the end of a listed line, but this is not one of them, at least not by default. use the command `el' to place end markers around listed lines. listed lines begin with ^ and end with $. enter `ep' to place end markers around all printed lines. use `eo' to turn end markers off., capital q does not quit the editor absolutely. this is because i often hit caps lock by mistake, or even shift q by mistake, and if i've forgotten about some important changes that i've made, those changes are gone! this seems contrived, like it would never happen, but it does, so i disabled capital q. type qt to quit absolute., capital j joins lines together with spaces between them., x (encryption) is not implemented., p (prompt) is not implemented., missing line numbers before or after the comma are assumed to be 1 and $. this is consistent with ,p -- to print the entire file., you cannot enter one command across two physical lines by putting a backslash at the end of the first line. and there's no need to in any case, because perl supports 
 translation. to split a line in the middle of the word doghouse, type:, s/doghouse/dog-
house/, only the first 500 characters of a line are displayed. the rest of the line is in the buffer, and can even be modified via a substitute command, but if you want to see it, you will need to split it, as in the doghouse example above. you can change the number of characters displayed by setting the linelength parameter in your config file, or by the ll command., a+ adds text, like a, but also adds the line you last typed, when you thought you were in append mode, but you weren't., this program is less tolerant of whitespace than /bin/ed. 57 , 63 p will not fly., a single % on the right hand side of a substitution is replaced with the last right hand side. some versions of ed do this, some don't., s, is shorthand for s/, +/,
 this is used to split lines at phrase boundaries. you can also use s. to split a line after the first period -- at a sentence boundary. s; s: s) and s" can also be used. s,3 splits the line after the third comma. you might need to use s.2 if the sentence begins with mr. flintstone., type s by itself for s//%., the commands sg and sl make the remembered substitution and replacement strings global and local respectively. if you want to look at all instances of "foo" in all the files in the current directory, and change some of them to bar at your discretion, edit *, then enter sg to make substitution strings global to all edit sessions. in the first session, search for foo, and replace some of them with bar. type e2 to move to the next session, whence you can search using slash alone, because the string "foo" is applied to all sessions. similarly, you can use % to refer to "bar". the sl command returns this editor to its local behavior, where each file has its own search/replace strings., errors associated with reading or writing files, or switching sessions, are always printed. other errors elicit the usual question mark, whence you must type h to read the explanation. type capital h if you always want to see the error messages., in most versions of ed, the command z7 means .,+6p, making the current line +7. this is inconsistent, having one and only one ed command that leaves dot somewhere other than the last line printed. the confusion is compounded when z prints the last lines in the file, whence dot actually is the last line printed. in this program z7 means +,+7p, and the current line becomes the last line printed, just like the other commands you know and love. without a number, z prints the previous number of lines. thus you can read your file a chunk or screen at a time., subsequent sections describe new and interesting features, completely foreign to ed. these include the simultaneous edit of multiple files similar to emacs and vi, and the ability to browse an html file and edit its fill-out form., the capital b command, on either the second or the last line, moves to the middle line "} else {", because that balances the open brace. on the first line, b moves to the second line, which balances the open parenthesis. the second line balances {, rather than ), because braces have precedence over parentheses, which have precedence over brackets. you can force a parenthesis match by typing b), which moves from line 2 back to line 1., the b command on the else line is ambiguous - not knowing whether to look backwards or forwards. type b{ or b}., you can explicitly balance <>, as in multiline html tags, or `', used in some preprocessors such as m4., comments or literal strings that contain balancing punctuation marks will definitely throw edbrowse off the track. if you are the author of the source, you might want to avoid braces in comments, or use comments to keep braces in balance., static char openstring[] = "{block"; /* closing } is found elsewhere */, if you quit a session you are moved to the next valid editing session, wrapping around to session 1 if necessary. the program exits when the last session quits., warning, the program contains a limitation regarding the undo command. if you switch to another session, then switch back, you cannot undo your last edit. you'd think this would be easy to fix, but it is trickier than it seems, so i haven't gotten around to it. make sure everything is copacetic before you switch to another session., use the bfl (buffer list) command to see a list of all the editing sessions that are currently open., let's run through a cut&paste example. you are editing file foo in session 1, and you realize that a paragraph from file bar would fit perfectly right here. here is how it might look. lines beginning with < are the user's input, and lines beginning with > form the program's responses. the # sign delimits my injected comments, which would not normally appear in the middle of a line., the following moves the data from one file to another., an e command, by itself, prints the current session, in case you've forgotten. this is similar to f, by itself, which prints the current file., the -dx option sets the debug level to x, where x is between 0 and 9. the default is -d1, which prints the sizes of files as they are written and read. some people like -d2, which prints the urls as you jump to new web pages or submit forms online. unless you are a developer, you probably don't want to go any higher than that. remember, the debug level can be changed on the fly by using the dbx command (x between 0 and 9). you can direct debugging output to a file by `db>filename', and you probably want to for db5 or above., the -e option causes edbrowse to exit when it encounters an error. this is usually used by batch scripts. if there is a problem, you don't want to march on, executing the rest of the edbrowse commands. note that set -e has the same effect in a bash script., use -c to suppress processing of, and edit, the .ebrc configuration file. (this config file will be described later.) you might want to do this if your config file has syntax errors, which are displayed when edbrowse starts. use the -c option to edit the config file directly. it is automatically loaded into buffer 1. note that -c must be the first option. make changes, save the file, and type `config' to reload the file. if there is another error you may need to make another change, save, and reconfig. continue until there are no errors. processing of the config file stops at the first error, so you really want a clean run., from within edbrowse, a file name of -c is treated as the config file. you can switch to a new session, view, edit, save, and reaply the config file without ever leaving edbrowse., the arguments to edbrowse are the files to edit. edbrowse reads these files into corresponding sessions and starts in session 1. if there are no arguments, you start in session 1 with no text and no associated file., if you like this program, and you want it to be your primary editor, you can set the following unix alias., alias e="/usr/bin/edbrowse", if you do this you can use `e filename' to edit a new file, whether you are inside edbrowse or at the shell prompt. very convenient., hello~07 ~x is ~c2~bd of y, and then listed, you will see the very same text, but there is a bell and a 1/2 character inside. the ~x is not encoded into anything, because x is not a hex digit. to force a ~, even though there are hex digits following, use two tildes, ~~., for international text, there are easier ways to enter accented letters into your document, assuming those letters are in your native language and your keyboard has been configured appropriately. in other words, there are typically keyboard shortcuts for your accented letters, so no need to mess with utf8. use ~u to enter a high unicode outside of your native language and beyond your keyboard shortcuts. the unicode is in hex. thus ~u3b3; is the greek letter gamma. the semicolon is optional. you only need it if another hex digit follows, as in ~u3b3;4 for gamma4. hello~u1f600world puts a grin emoji between hello and world, because w cannot be confused with a hex digit., regular expressions can be entered via hex or octal. this program converts ~xx, as a hex value, and the perl regexp machinery converts 
nn, as octal. thus any of the following will undos a file. the first is translated by edbrowse, the second and third by perl regular expressions., ,s/~0d$//, ,s/15$//, ,s/$//, embedded escape characters are always displayed in hex, whether the line is listed or not. most terminals and terminal emulators, including the linux console, interpret various escape sequences as control commands. thus an errant escape sequence from a binary file could send your terminal into an unexpected state, making recovery difficult. use /usr/bin/reset to put the terminal back into a sane state. thus it seems prudent to render escapes as ascii characters all the time. if you have no idea where that ~1b came from, it's probably a literal escape character in your file., returns and nulls are also converted into hex all the time. thus an embedded return will not make one line look like two lines. you will usually see this when importing a dos or windows text file. every line ends in ~0d. issue one of the three commands shown above to undos the file., when binary data is first read into the buffer, you will see the words "binary data". after that the buffer remains "binary", even if you delete all the data and read in ascii text. you must use the `e' command to get a fresh text buffer., for the most part it doesn't really matter if the data is binary or text. either way you can display and edit the data, and write it to a file., edbrowse tries to "do the right thing" under dos/windows. that is, it converts crlf to and from newline if it believes the file is text; and it leaves binary data alone. these distinctions are not relevant on unix/linux., although this approach is satisfactory for english and most european languages, it fails miserably for asian languages, which definitely look like binary data. you can disable binary detection by entering the `bd' command. if you speak an asian language, you may want to put this command in your init script, so edbrowse comes up the way you want - treating your international files as text files., if you speak an asian language, and you are running windows, and binary detection is disabled, don't use this program to manipulate binary files, as they will get corrupted!, like the browser, and like other file managers, the go command will invoke a plugin if that is indicated by the suffix of the file. an mp3 file plays, and a pdf file is rendered into readable text. use the `pg' toggle command to disable plugins if you don't want this automatic behavior. more on plugins later., like `ls -f', a subdirectory is indicated by a trailing slash. this slash is not part of the filename. similarly, named pipe is indicated by |, symbolic link by @, block special by *, character special by <, and socket by ^. if a regular file ends in one of these characters, it may confuse you, but it won't confuse this program. edbrowse knows whether that trailing | is part of the filename or a pipe indicator. since each file is represented by a single line of text, files with newlines embedded in their names cannot be accessed., if you read a directory into a preexisting file it is just text. you can't visit any of the underlying files, because they are just words. you must edit a directory in its own session or read a directory into an empty session if you want to access the underlying files. note that you can write the buffer to another editing session, and in that session the words are just words. this distinction is important as we start to edit the text., by default, directories are readonly. if you try to delete a line, and hence the associated file, it will tell you that you are still in directory read mode. type dw to enable directory writes, and dr to make directories readonly again., when directory writes are enabled, you can remove files using the d command. for instance, g/.o$/d removes all the object files. since these edits have implications outside the scope of this program, there is no undo capability. when you make a change it is made. with this in mind, i borrowed a good idea from microsoft / apple. the deleted file isn't actually deleted; it is moved to your trash bin, located in $home/.trash. this is consistent with the mac and many versions of linux. if you accidentally type ,d and remove all your files, you can recover them from your trash bin. you may want to set up a cron job that removes all the files from your trash bin once a week. this directory is created mode 700, so nobody else can look at your deleted files. if you create this directory yourself, please make it 700. after all, some of your deleted files might be private., because this operation is a move, rather than a true delete, there are a few restrictions based on the operating system. if your os can move directories, this program will be able to delete a subdirectory as easily as a file. the entire subtree is moved to your trash bin. make sure your cleanup cron job is capable of removing directory trees, not just files., if the trash bin is on another file system, the file is copied, rather than moved. it's practically the same; though the file will have your permissions and a current time stamp. directories cannot be copied in this way. you must copy the directory tree yourself, then delete it, using cp -r and rm -r., note that the dx command, wherein files are truly deleted, is the only way to free up space on the disk. symbolic links and special files are always deleted; there isn't much point in moving a link to the trash bin., "what's the point of all this?" you may ask. "what's wrong with the shell?", nothing, as long as the file names are small and familiar. but sometimes the file names are long and cumbersome, and it is nearly impossible to type those names into the shell, character for character, upper and lower case, with no mistakes. meta characters such as the * can help, but only when the file you want has a name radically different from the other files in the directory. this isn't always the case. suppose an application generates log files as follows., how do you delete the old ones and keep the most recent, or rename them to something more manageable? stars are a bit risky; you can access multiple files without realizing it. and we're not even talking about those pesky files with spaces or invisible control characters in their names. a file manager brings up the list of files, whence you can click on the file you wish to view or edit or remove. edbrowse gives you that kind of power in a command line setting., when the substitute command changes text, it renames the underlying file. this won't move the file on top of another existing file, so you can't lose any data this way., the search and substitute commands ignore the trailing filetype characters. if you want to rename a directory from foo/ to foobar/, you can type s/$/bar/. the bar will be placed at the end of the word foo, because the trailing / isn't really there., now suppose you want to run an arbitrary program on some of these files. this could be a print utility,a compiler, whatever. sometimes you can rename the files for your convenience, then work in the shell. but sometimes you don't own the files, and sometimes they must retain their original names. this happens when several html documents reference each other through hyperlinks, using their existing filenames. so you can't rename the files, yet you still want to run your program on one or two of them., you can run any program on any file without retyping that filename via the shell escape. use kx to assign the label x to the file you are interested in. this is standard ed syntax. then run !program 'x to invoke your program on that file. this sounds involved, but it is merely macro substitution, implemented in a few lines of code. if 'x is present in a shell escape, and is not next to any letters or digits, edbrowse replaces it with the text on the line labeled x. if your filename contains spaces, run !program "'x", to make sure the entire file name is one argument to the running program., the token '. is replaced with the text on the current line, and the token '_ is replaced with the current filename. if you try to write a file, and remember that you left it readonly, you can make it writable via !chmod +w '_, then write the text to the file., you can expand multiple tokens in one shell command. use kx and ky to mark two files that you want to compare, then run !diff 'x 'y., this feature is not limited to directory scans. you may be editing a simple file, but you can still paste the contents of a line into your shell command. off hand i don't know why you'd want to do this, but you can., when in directory mode, the ls command displays various attributes of the file on the current line. type lsl for the length, lss for the approximate size, lst for the mod time, lsp for the owner group permissions, lsi for the inode, lsk for the number of hard links, lsy for the path associated with this symbolic link, or lsm for the major and minor device numbers. (the last 5 do not apply on windows.) these can be combined, e.g. lspk prints permissions and the number of hard links. ls is the same as lsst, size and mod time., if you want file length and time to appear next to every file in a directory listing, then enter ls=lt. the equals sign applies the ls directive to all subsequent directory scans. type ls= to turn this off. here is how the root directory might look with ls=lt., all entries are directories under the root directory, thus they all end in /. the birst entry is bin@/ because bin is a symbolic link to usr/bin (most systems are configured this way), and /usr/bin is a directory. the size of /proc is 0, because /proc is a virtual filesystem. the same holds for /sys., if you search for the year 2014, you won't find anything, because the date and time are extras that are not part of the file name. searches and substitutes apply to file names only. if you want to view the entire text as text, write it to a file, or to another session., this is especially useful in a directory scan. if directory write mode is enabled, type ,lc to convert all the file names to lower case. it's that simple., if you want to upcase a particular word, type s/word/uc/. this converts the word to upper case. all the other substitution suffixes apply. to change foo, foo, foo, and foo to foo, everywhere, type ,s/foo/uc/ig., if one of the original lines, delimited by newline or return, is long, i.e. more than 120 characters, it is assumed to be a self-contained paragraph, and a blank line is added before and after. thus a disassembled paragraph containing 20 sentences does not simply flow into the next disassembled paragraph containing 18 more sentences. an empty line separates the two paragraphs. this is only applicable if bl is applied to a range of lines, or the entire document, as might occur when making an outside document readable., don't apply the bl command to a preformatted section, such as a table or ascii art. if you're not sure what to expect, i.e. you didn't write the file, scan through it first, and apply bl to the range of lines that actually represents text., you might be tempted to use bl to make word documents readable, but use catdoc instead; it does a better job. this is a must-have program for people who want a command line environment., this is a narrow window to be sure; the computer has to fail at precisely the wrong millisecond. to guard against this improbable calamity, some editors write your data to a temp file, remove the true file, and move the temp file over to the true file. this way your data cannot be lost. either the new or the old file will survive., then links came on the scene, hard links, and then symbolic links. authors of ed and other editors had to scramble. you can't remove a link, write to temp, and move the temp file over to the link. it isn't a link any more, it's a regular file, and your filesystem is not what it use to be. for one thing, the true file, pointed to by the (symbolic) link, has not been changed at all. this is not what you want! so people rewrote there editors to disable this feature if the named file is a link to some other file. they had to revert back to the old truncate and write paradigm, and hope that nothing bad happens in between. and you know what, it never does. the window is just too small., with this in mind, edbrowse doesn't mess with temp files at all. it truncates the file and writes out the data, hoping nothing will go wrong during the critical millisecond., another race condition is more subtle. suppose you are editing a file and your friend, or a system program, edits the same file. your file has actually been changed out from under you while you held it in memory. when you go to write your changes, they will clobber any changes made by your friend, or the system utility. most text editors guard against this by watching the timestamp. when you first edit the file foo, an editor might remember the timestamp on foo. then, when you are ready to write your changes, it checks the timestamp, and if foo has been updated in the interim it issues a warning message. "file has been updated by someone else - do you really want to write?" this is a good feature, but edbrowse doesn't have it, simply because i haven't gotten round to writing it. this feature is not in high demand., note that this is not browsing, we are simply retrieving text from another machine and editing it locally. the text need not be html, it could be (for instance) a plain ascii document. many people put various types of files, even executables, on their websites for retrieval. of course you wouldn't want to edit a binary file, but you can still use this editor to retrieve the file and save it locally, thus implementing an http download., while inside the editor, you can type `e url' to leave the current buffer and retrieve text from a remote machine. or you can type `r url' to retrieve remote text and add it to the current buffer. there is no `w url' command, because the http protocol does not allow you to write html source back to a remote machine., as a convenience, any filename with two or more embedded dots and a standard suffix (such as .com or .net) is treated as a url. you can usually omit the http:// prefix. try invoking `e www.space.com', as an example. but again, you are looking at html source, which probably isn't what you want. browsing will be discussed later., whenever you retrieve data from a url, the editor, directed by the http protocol, might change the filename out from under you. this is because the resource has moved and the original computer was kind enough to give you the new address. if debugging is set to 2 or higher, you might see a series of three or four different urls as the editor is redirected across the internet. finally it retrieves your document, and the current file name holds the correct and latest url. you might want to update your bookmark file accordingly. then again, you might not. sometimes the initial url is the "public" location of the web page, and subsequent redirections occur inside the company. in this case you'll want to retain the public url, which will always work, even if the company relocates its web server. use your best judgment., when the browse conversion is executed, the system checks for common syntax errors, such as a numbered list that is never closed. if the file name is a url, these syntax errors are not reported. after all, it's not your web page, and there's nothing you can do about it. however, if the web page is yours, as indicated by a local filename, the first syntax error is displayed, whence you can return to the html source and fix it. type `ub' to undo the browse conversion. this takes you back to the raw html text under its original filename. now you can correct the error and try the `b' command again. for your convenience, the label 'e is set to the line containing the error. repeat this process until `b' runs without errors., if you try to quit, and the editor says "expecting `w'", remember that you should be back in raw html before you issue the write command. you could write the browsed text into file.browse, and that will satisfy the "write" criteria, but this isn't really what you want. you've corrected errors in the html source, and that's what you need to save, so remember to undo the browse reformatting before you write the file., note that you can issue the unbrowse command even if there were no errors. if, for instance, you are looking at a well-constructed page on some other website, and you'd like to read or save the raw html, just type ub. as an exercise, invoke `e www.space.com', and use the `b' and `ub' commands to switch between the raw html and the browsable text., the browse reformatting is relatively simple. most tags are discarded, except those related to headers, paragraphs, and lists. subsections and list items are not indented. the visual effect is not important, and sometimes the extra spaces get in the way., because the physical line is the unit of thought, i.e. the atomic construct that is modified or moved or copied, lines are cut at approximately 80 characters, give or take a few, usually at a sentence or phrase boundary. thus reading line by line often reveals a sequence of sentences, or at least self-contained phrases within a larger sentence. if you read this manual raw, without doing the browse on the file, you'll see what i mean., the layout of a preformatted section, <pre>, is honored, although sequences of blank lines are compressed down to one blank line, and whitespace at the end of lines is stripped. this preserves the structure of street addresses, code fragments, poems, and other preformatted blocks., tables are formatted like an ascii unload from a spreadsheet or sql database. pipes separate the fields on each row. there is no whitespace around the pipes, and the fields of a given row probably won't line up with the fields below. it isn't pretty, but you can't really trace down a column when using a line editor such as this in any case. better to write the table to a local file and use cut, sort, join, etc. here is a sample table., empty fields at the end of a row are dropped. these are almost always images -- sometimes an entire row of images -- sometimes an entire table of images., note that the browsable text is readonly. after all, it's not the "source" -- why should you edit it? there are ways to enter and edit the input fields of an on-line form, but this will be discussed later. for now, you can think of the text as readonly. issue a copy or insert or substitute command, and you'll get an error., if you do want to edit the text, as pure text, enter the `et' command (edit as text). you will not be able to return to the html that produced this page, nor can you follow a hyperlink or submit a fill-out form. the browsable text has become plain text, with no internet semantics., the command `b file.html' is shorthand for `e file.html', followed by `b'. remember that the ub command reverses the browse conversion, and reproduces the original html, as though you had entered `e file.html' alone., if a url is opened from the command line, as in `e www.google.com', it is automatically browsed. type `ub' to revert back to the raw html., a subscript, as indicated by html tags, is enclosed in brackets. thus x<span class=sub>n</span> becomes x[n]. (span.sub should render the subscript properly in your css file - lower and in a smaller font.) this transformation is not done if the subscript is a one or two digit number. thus x subscript 1 is rendered x1, just like your professor would say it. this is not ambiguous, as you might first think; only programmers use x1 as a variable name, not mathematicians. if you see x1 in a formula, it means x subscript 1. even 17a3b3 is not ambiguous; it is a translation of 17 times a[3] times b[3]., superscripts, as indicated by <span class=sup>, are enclosed in parentheses with a preceding arrow. the parentheses are omitted if the superscript is a number. thus x cubed looks like x^3, while x to the n-1 power looks like x^(n-1). again, your css file should define span.sup., edbrowse supports the translation of certain &word; constructs in html, such as &lt; for the less than sign, along with &#code: or &#xcode; for direct inclusion of unicodes in html. the greek letter theta can be encoded as &theta; or &#952;, or &#x3b8;. in each case it is translated into the utf8 sequence for theta. your screen reader should be able to render this as the word theta, perhaps under the direction of a configuration file. such translations are left to the adapter; edbrowse merely turns html into the proper utf8 sequences., these translations are designed to work with the pages of the math reference project, an archive of advanced mathematics that attempts to be both sighted and blind friendly at the same time., note that `ft' prints the title of the web page, whereas `f t' (with a space) renames the current file to "t", which is probably not what you want., if a web page is updated every minute, e.g. with the latest stock prices for your favorite companies, you can type rf to fetch the latest copy of this web page. this assumes the intervening internet servers are not caching the web page and handing you the same out-of-date copy over and over again., on your local machine, you can use this feature to read the latest version of a dynamic file, such as a log file. or you can reread a directory, to incorporate any new files that have been placed in that directory. for example, you might use the shell escape to execute `cat x y >z', yet z will not appear in your directory scan until you type rf., {recent reports} suggest a connection between health and intestinal bacteria., behind the scenes, "recent reports" is linked to http://www.sciam.com/article.cfm?id=jeremy-nicholsons-gut-instincts, but you don't see that unless you activate the link or view the raw html., of course the browsable text might also contain words inside braces, especially if the web page is technical in nature. there is some ambiguity, but it is often clear from context. {more information} is probably a link, whereas ${home}/.profile is probably not., some web pages present a series of icons that are actually links to other pages. you click on a picture, rather than a phrase, to go somewhere else. these icons are suppose to be intuitive. sometimes they are - sometimes they're not. sometimes the web designer is kind enough to supply a text phrase that roughly describes the image. in this case the phrase is used as the link. if there is no alternate phrase, the filename of the hyperlink reference is used. this name can be surprisingly helpful, or it can be utterly useless, as in "index.html". if this name cannot be determined, the generic link {image} is used. in this case you will have to go to the web page to find out what it contains., note, an image that is not part of a hyperlink has its alt text enclosed in brackets, as in [girl with a long red braid]., to follow a link, enter the `g' (go) command. yes, `g' also initiates a global substitute command, but only when it is followed by a regular expression. by itself, g follows the link on the current line, g2 follows the second link on the current line, and 4g follows the link on line 4. g$ activates the last link on the line. if a link spreads across multiple lines, you must be on the first of these lines, the line containing the left brace., the g command can also act on a link that is written in raw text, as long as it looks like a valid url. if your friend sends you an interesting url via email, and you save it to a text file, you can go to that link, even though the file is not html and you've never issued a browse command., the g command follows an internal link or an external link. either way you find yourself in a different place. however, if the link is internal, you are still browsing the same file. in fact, the only thing that has changed is the current line number. the new line is displayed, and should correspond to the link you activated. often the words are the same. activate {appendix i}, and you'll probably see the section heading "appendix i". enter z10 to read the first few lines of the appendix., this feature seems rather silly if you're just editing files, but it makes sense when surfing the net. often we descend through two or three links, only to find ourselves at a dead end. "i didn't want to go here." hit the back key again and again, until you reach familiar territory. you can now proceed in a new direction. the command ^3 or ^^^ backs up through three pages. don't use this iterative feature unless you know exactly how many times you need to back up., note that the entire state of an editing session is saved and reproduced, including the file name, the last search/replace strings for substitutions, the hyperlinks and forms, the compiled javascript, everything!, the stack should not be confused with parallel edits, as described in an earlier section. in fact each editing session, e1 e2 e3 …, has its own stack. parallel sessions are appropriate when you need to move back and forth between two files, or cut&paste between them. however, one session, with its internal stack, is usually sufficient to surf the net., if a browse command fails completely, giving you a rather uninteresting empty buffer, the stack is popped automatically, taking you back to the previous web page. now you can retry the link by typing `g' again, or follow a different link on the page. note that a browse command can fail, and still give you text explaining why it failed, if the remote server is well-designed. in this case you may see the error message "file not found", yet you will be viewing a new web page, which explains the problem. after you've read the explanation, follow its directions, or type ^ to back up and try again., if you are presented with a number, even 0, the stack has been pushed, and you are in a new file or url. the number is the size of the new file. use the ^ command to get back. if there is no number, merely an error message, then edbrowse did not create a new buffer. it probably didn't get that far. typing . will produce the same line you saw before., following an internal link to another section in the current document does not push anything onto the stack. in other words, ^ will not take you back to where you were. in fact, it will take you up to the previous web page, which is not what you want. if you want to take a glance at appendix i, and then return, mark the current position with `kr'. after you've visited the appendix, use the label 'r to return to your original location in the file., it is generally unsafe to make a copy of a running web page, with all its javascript objects etc, so the m command moves the page out of the way, and takes you back to the previous page. note, this command works just as well with files., suppose a web page presents, {planes} {trains} {automobiles}, if you are curious about all three topics, issue these commands in this order., now sessions 2 3 and 4 are the subpages about plains trains and automobiles respectively. you can fill out forms or follow hyperlinks in any of them, or stay in session 1 and do something else., {background music}, this always appears at or near the top of the page. click on this link to hear the music. it should play automatically if you have the proper plugins configured. if there is no plugin for that particular file type, or if plugins are disabled, then edbrowse will load the audio file into the current buffer. you can download it to a file, or play it in some other fashion. try the play buffer `pb' command. normally pb uses the name of the file to infer the audio format. if the filename ends in .wav, it's a wave file, and so on. failing this, edbrowse tries to infer the file type from the content-type attribute in the http headers. if the filename is not particularly helpful, and the http headers do not provide a known content type, and you know the audio format, you can specify it by typing pb.wav for a wave file, pb.mp3 for an mp3 file, and so on. the config file (described below) includes mime types and plugins, which tell edbrowse how to play various audio files. these must be set up, or the pb command won't work. it will say something like, "i don't know how to process an mp3 file". this is consistent with other browsers, which use plugins to play multimedia files that are retrieved from the internet., the first line in this sample form is a simple text field, which is initially empty. you supply the keywords to search for. entering and editing input fields is discussed later., the second line is a checkbox. this field tells the search engine to use advanced boolean features, such as this keyword and that, or this, but not that, etc. the feature is disabled, indicated by -. (most people don't know how to use advanced search anyways.) a + means the checkbox is on., the third line determines the language of the keywords, english by default. this isn't a free text field, you can't just type in anything you want. it is a dropdown list of languages. i'll describe how to view the options later., the fourth line is the submit button, which sends the form to the search engine and retrieves the results. this field cannot be edited; it is merely a button to push., the fifth line is also a button to push. it clears all the data you have entered, so you can start over. default values will be restored. thus the third line goes back to <en>, rather than <>., if there is only one input field on the current line, i? displays information about that input field. if the line contains multiple input fields, you will need to use a number, as in i3? for the third field. the type of input field is displayed, then its size, then the field name. if the input field is drawn from a set of options, the option list is displayed as well, with menu numbers prepended. when you want to select an option, you can either type in a substring that determines that option uniquely, such as mich for michigan, or you can type in its menu number. recall the sample form in the previous section. if you type i? at the third field, you might see the following., if a select list contains hundreds of options, type i?string to see only those options that contain the specified string. type i?mi in a state field and get michigan, mississippi, missouri, and minnesota. then you can select the option you want by name or by number., now let's do some data entry. type i=xyz to place xyz in the input field. type i3=xyz to put information into the third input field on the current line. if you get an error, it is probably because the field has a fixed set of options, and you didn't pick one of those options. you can either type in one of the options or its menu number. you can also type in a fragment of the option you want, and edbrowse will fill in the rest. this is done whenever one and only one option contains a copy (case insensitive) of the string you entered. thus you could enter tali above and get italian, as that is the only language with those four letters. this is useful when you are entering your address, and they ask for the state. type in a few letters of your state name, enough to be unique, and you'll probably glom onto the correct option in the list. note the paradigm here: in a command line program, you don't want to wade through a menu unless you absolutely have to., there is some ambiguity when the option is itself a number. in this case edbrowse performs three matches. if you type in the number exactly as it appears, that option is selected. if the number you entered is not a perfect match for one of the options, it is treated as a menu number. if it is not a valid menu number (e.g. out of range), edbrowse performs a partial match on the options, looking for those digits as a substring. this may seem confusing, but it is usually what you want., you can use i<7 to pull the contents of session 7 into the current input field. session 7 must have one line of text only. similarly, i<filename reads the contents of the file into the current input field. again, the file should contain one line of text. the filename is expanded in the usual way. this includes wildcard expansion, as long as the expansion leads to one and only one file. put enough characters around the * to designate a single file., suppose you are entering your credit card number, all 16 digits, into a free text field. if you've made a typo, you don't really want to enter the entire string again. no problem -- use the substitute command. you can write this as i/x/y/ or s/x/y/ -- as you prefer. remember, you may need to specify a field, as in s3/x/y/. the usual substitution syntax is honored. don't overgeneralize the g suffix. s3/x/y/g changes every x to y in the third input field, but does not affect the other fields on the current line., if the submit button is the third field on the current line, you can press it via i3*. however, i* is sufficient when there is only one button on the line. similarly, you can establish a text field by entering i=kangaroo, rather than i1=kangaroo, if the second field on the current line is a submit button. you only need specify a field number when there are multiple input fields, or multiple buttons, on the current line., the lynx implementation of the text area is somewhat restricted. this is not surprising, since lynx is not an editor. you can correct small typos on the current line, but you can't actually edit the text you are working on. once you hit return, that line is done, and you're on to the next line. you can't move lines around or insert lines, nor can you prepare your comments ahead of time and read them into the text area from a file., in edbrowse, the text area is managed from another editing session. this allows you to use the full power of the editor. you can move text, make global substitutions, or read comments in from a prepared file. the editing session is chosen for you, and appears in the input field. consider the following form., in this example, session 2 was not active when browsing began. the browser allocated session 2 specifically for this input field. type e2 to move to session 2, prepare your comments, then type e1 to return to the input form. on most web pages the text area starts out blank, whence buffer 2 will be empty, but this is not always the case. be sure to check for pre-existing text before you start typing your thoughts. a particularly arrogant site might preload the text area with: "i love your website because:"., when you finally submit the form, as discussed in the next section, the text in buffer 2, associated with the second editing session, will replace the words "bufffer 2" in the input field. thus your carefully crafted comments are on their way., edbrowse supports the "get" and "post" methods, the most common http protocols, and they seem to work on most sites., once you have submitted your form and you are viewing the results, you may notice some strange characters at the end of the filename. if you have retrieved information on kangaroos, the filename might look like: www.search-engine.com?keywords=kangaroo. the text after the question mark is an encoded version of the data you entered into the form. it becomes part of the virtual url. this is actually a good thing, as we shall see in the next section., i suppose i could interrogate the environment variable $bookmarks myself and append the url to that file automatically, but as this example shows, you might not want all the links. in fact the email link makes no sense in a bookmark file. also, you may want to change the description of the link, though in this example the description is pretty reasonable., alternatively, you might discard the url and retain the email address, appending it to your address book. again, you will want to change the generic phrase "send us mail" to a brief string that is meaningful to you, such as kangaroo-mail. this becomes the alias, which you can use to send mail to that recipient. subsequent sections will describe the use of edbrowse as a mail client., if there are no links on the current line, or you are not in browse mode, the current filename is used. this is useful when you want to bookmark the current page, rather than some other page pointed to by a link., if the current page is the result of a form submission, the filename may include your input fields after the question mark. if it does, that's a feature, not a bug. this exact url, with the data at the end, can be stored as a bookmark and activated again and again, as though you had filled out the form each time. every week you can call up this virtual url to see if there is any new information on kangaroos. a more practical example might be a canned query that retrieves the weather for a certain city or the stock prices for the companies in your portfolio. you can also write concise scripts that fill in the virtual form, simply by modifying the information after the question mark. this provides a simple command to retrieve the weather from any major city or the current price of any stock., if the form uses the post, rather than the get method, the same data will appear, but the question mark is replaced with a control a. unfortunately the control a is not visible, and this could cause confusion. when in doubt, list the line., under the a command, the text of the newly created hyperlink is the title of the current page. if there is no title, the text of the link is drawn from the url, which is definitely suboptimal. in that case you might want to change the text of the link. fortunately, most internet pages have a title., one last warning about adding links to your bookmark file. let's say you've issued the a command, and tweaked the description just a bit. now the link is just write, and you want to save it. you accidentally type `w $bookmarks', forgetting the plus. instead of appending the link to the end, you have clobbered your entire bookmark file. years of accumulated links are gone. to avoid this disastrous typo, create a macro to append to your bookmark file. i know, we haven't talked about user defined macros yet, but we will. and when we do, you should write a "bookmark append" macro that looks like this., now you can type <bma to add a link to your favorites, and you don't have to worry about typos. it's shorter than `w+ $bookmarks' anyways., persistent cookies are stored in a file, specified as `jar = file' in .ebrc, and are thus available for subsequent edbrowse sessions. these cookies are used to store long-term information about you, such as your login and password into amazon.com. hence your cookie file should be mode 0600. in fact it is created mode 0600 if it does not exist., you probably won't need to view your cookie file, ever, but it is text based, and can be edited directly if you wish. don't edit it when any web pages are active, or you may run into race conditions., speaking of race conditions, don't surf the net using separate instances of edbrowse running in different virtual consoles. instead, run one instance of edbrowse with different web pages in different buffers. parallel edbrowse programs could each write out the cookie file independently, and the second could conceivably clobber some cookies that were set by the first. it's only a minor nuisance, and you might not even notice. still, a future version of edbrowse might use one global http server to get around this problem., edbrowse will verify ssl connections if you supply a file of ssl certificates. this is an antispoofing measure, to make sure a hacker isn't posing as your bank, trying to steal your account numbers and passwords. on some linux distributions, you can run `cd /etc/ssl/certs ; cat * >../edbrowse-certs' to capture ssl certificates that are as current as your linux system. if you don't have or create this file, or, if you don't specify its location in your config file, you will not be able to verify secure connections, and you will be warned accordingly. some browsers don't have this feature at all, so it's not the end of the world, but in general it's a good idea to verify your secure connections, unless it prevents you from getting to a website whose authenticity you accept at face value. in that case you can use the vs command to turn the feature off. this is a toggle command; type vs again to turn the feature on. for another method of disabling verification on a site-by-site basis, see the novs directive in the configuration file section below., never send sensitive information, such as social security numbers or credit card numbers, over an insecure channel. make sure the form is using ssl. how can you tell? the submit button will have the word "secure" added to its text., <make your purchase now secure>, this is similar to the lock icon that explorer uses to tell you that your connection is secure, although edbrowse is not quite as foolproof. a website could fake you out by putting the word secure in the submit text., note that generic buttons, besides the submit button, can also submit your form through javascript. i don't know if that button is going to submit the form or not, and i don't want to put the word "secure" on every button on the page. i only add it to the submit button, but if that button is secure then the others are probably secure too., if you have logins on secure servers, such as paypal.com, you must keep your password absolutely safe. never send that password over an insecure connection. it becomes as valuable as your credit card numbers. use a special password for your secure logins, and only for those logins. use other, expendable passwords when the connection is not secure., please don't fall for all those phishing email scams that tell you your login has expired, and would you please log in again using this convenient form. the mail is forged to look legitimate, and the form actually sends your secret password to a thief who then raids your account. a reputable company will never ask you to login through an email form. they will always tell you to go back to the website and log in there., internet security is complex, to say the least, and it is beyond the scope of this document. as a general rule, secure http is really quite safe, and you can use it to send sensitive information across the net. it's probably safer than giving your credit card number to the clerk on the phone, who use to take your order before there was e-commerce. so it's ok to be a little bit paranoid, in fact it's probably a good idea, but don't let that stop you from making your online purchases., by default, edbrowse uses the account name "anonymous" and the password "ftp@example.com" for ftp connections. however, you can override this in the url, and some web pages take advantage of this feature. for example, let's say you want to access the file /opt/foobar on whatever.localdomain. this file isn't readable by anonymous users. you have to log in as a real person. within edbrowse, you might use the command:, e ftp://chris:xxx@whatever.localdomain/opt/foobar, the ftp connection will be made as user "chris", with password "xxx"., some ftp urls point at directories, not files. if you visit one of these, and it is located on a unix-like server, you will receive the listing as an html file with hyperlinks. you can visit the directory members just as though you were exploring a website. if the server does not run some flavour of unix, you will receive the directory listing in plain text., the ftp mode, i.e. the style of data connection, can be either active or passive. one works well when the client is behind a router, and the other works well when the server is behind a router. you can specify ftp mode active by entering the command `fma', or ftp mode passive by `fmp'., efficiency. the proxy server may be able to store previously-accessed webpages (known as caching). if your connection to the proxy is faster than your connection to the rest of the internet, then caching insures that frequently-accessed web pages load quickly., policies. some firewall administrators require their users to use a proxy server., anonymity. there are so-called anonymizing proxy servers that hide your ip address from the websites that you browse., if you wish to use a proxy server for http traffic, simply set the proxy option in your configuration file. provide the proxy's hostname and port, separated by a colon. for example:, proxy = http * proxy.campus.edu:3128, all http traffic, for any domain (indicated by *), is routed through proxy.campus.edu on port 3128. note that proxies often listen on ports other than port 80. squid is a proxy server that comes bundled with some linux distributions, and it uses port 3128 by default., protocol and domain can be specified, or either can be replaced with a * for any protocol or any domain. a missing domain is treated as a * (all domains), and a missing protocol and domain matches everything. such an entry should be last in the list of proxies in your config file, since proxies beyond this point have no meaning., the word direct in the third position is a direct connection, with no proxy server. these are usually placed at the top of the list, to access certain internal domains; then the proxy server is specified for all others., proxy = http|https hr.mycompany.com direct proxy = http|https|ftp * proxy.mycompany.com, as shown in this example, different protocols can be separated by pipes. beware, placing a * in the protocol field embraces all protocols, including ftp, pop3, and smtp. mail will attempt to pass through this proxy, just like web traffic., a page of frames might look like this. i think you can guess which one to click on., frame {navigation} frame {main} frame {bottom}, i thought about a fetchframe feature that fetches all the frames and presents them in one go, just as they are all displayed on the screen in a traditional browser, but this feature is very difficult to implement, and so far nobody seems to want it., the first version of edbrowse, written in perl, ignored javascript completely, and that was ok for a while, but more and more sites use javascript, and these websites were simply inaccessible. most of the e-commerce sites fall into this category. if you want to make purchases, or manage your bank account online, you need a javascript enabled browser., the second version of edbrowse, written in c, and indicated by a version number that starts with 2, included a home grown javascript compiler and engine that i wrote myself. this worked pretty well, for a spare time project, but javascript evolves, like any other language or standard, and i just couldn't keep up., the third version, which is the "latest and greatest", uses a javascript engine from mozilla.com, which is open source under the mozzilla public license. this allows me to leverage, rather than reinvent, some 70,000 lines of code - and somebody else is maintaining that code as javascript evolves., edbrowse does not support all the features of client side dom javascript, and it never will. for example, many websites use javascript to change images on the fly as you move your mouse around the screen. this has no meaning in edbrowse. other websites bring up multiple windows, and let you control the contents of subwindows using icons in a master window. this would be difficult to simulate in a command-line environment, though perhaps not impossible., some javascript is implemented, some is not. this is still a work in progress. if you submit a form, or go to a hyperlink, and nothing happens, absolutely nothing, then the web page is probably trying to use javascript features that are not yet implemented. raise the debug level to 3 or higher and push the button again to see the javascript errors. then, if you wish, disable javascript with the js command and try again. however, the website may not behave properly or as expected with javascript disabled. see the disclaimer at the top of this users guide., you can also disable javascript for specific domains. this will be discussed later in the edbrowse config file., in some cases the javascript function reformats your data. it may fill in some of the hidden fields for you, or it may compute sales tax and adjust the purchase price accordingly. this is more than form validation, this is active javascript, and the data won't be right unless the javascript runs properly on your computer. more and more sites are using active javascript, so a javascript enabled browser is a must., some javascript functions manage menus dynamically. make a primary selection, and javascript populates a second dropdown list with options corresponding to your first selection. you can now make a second selection, which further refines your search. if the first menu presents "meats", "vegetables", "fruits", and "grains", and you select fruits, the second menu might contain "apples", "oranges", "lemons", etc. javascript makes this possible. these dynamic menus are supported by edbrowse. you will see a message like, "line 352 has been updated", where 352 contains the submenu. type 352i? to see the newly created menu options., you have a distinct advantage over all those other surfers with their graphical browsers. the popup window does not open automatically. instead, the popup appears as a hyperlink at or near the top of the page, and you can click on it if you like, or ignore it. this is similar to the background music, described in an earlier section. the popup link might look like this., redirect: {spring specials}, popunders are not as common. they appear after you have closed the window. in some sense they are hidden "under" your web page, and when you close the page they pop out. in edbrowse, this does not happen automatically. when you type q, you quit, and that's the end of it. as you might expect, the popunder function appears as a hyperlink. it might look like this., onclose {body}, remember, the popup link is a simple html link to another web page, while the close link calls a javascript function on the current page. however, this javascript function usually links to another web page, so don't be surprised if you find yourself somewhere else on the internet. in either case, popup or popunder, you can use the back key to return to the page you were looking at. if you need access to a popup window and the main page in parallel, use the m command., the config file is in $home/.ebrc. the "eb" is shorthand for edbrowse. you cannot rename the config file; it is what it is. the location in windows is different, but still based on $home., the config file is line oriented. lines beginning with # are comments, and are ignored. blank lines are also ignored. all other lines fall into one of 7 categories., define an option using the keyword=value syntax., define an edbrowse script that can be invoked from the command line or from another script., an edbrowse command, that becomes part of an edbrowse script., establish an email account. this will be described later, under email clients., a mail filtering rule., describe a plugin., describe a table or a view in an sql database., recall the section on cookies. you'll need a file, often called a cookie jar, to store your cookies. the line that establishes this cookie jar might look like this., jar = /home/mylogin/.ebsys/cookie-jar, this is a simple keyword = value syntax. it's ok if the filename has embedded spaces, or even an equals sign. no need to quote it., when edbrowse sees this line in its config file, it records the location of the cookie jar, and it checks the validity of that file. if the file is a directory (or something weird), or is otherwise inaccessible, edbrowse prints an error message and stops processing the config file at that point. if this happens, edit your config file and change the cookie jar., here are some additional name=value directives. some of these are used to set up an email account. this will become clearer when we talk about the mail client., certfile = /etc/pki/tls/cert.pem, specify the file that holds the certificates for secure connections. this was explained in the section on secure connections., maildir = /home/mylogin/mbox, go to this directory when fetching mail. thus, if you save a mail message, you'll always know where it is., webtimer = 30 mailtimer = 180, wait 30 seconds for a response from a web server, and 3 minutes for a response from the mail server. a time value of 0 waits forever. sorry, there seems to be no way to interrupt a socket call, other than control backslash (quit), which kills the entire program. that's why these timers are here - so you don't hang forever. the defaults are 20 and 0 respectively., downdir = /home/mylogin/downloads, when you access a binary file on a website, you have the option of downloading it directly to disk, rather than reading it into memory. if you do this, the file is placed in this download directory by default. if the file name you entered has a slash, or if there is no download directory, the path is taken relative to the current directory (assuming it is not absolute). in this case, globbing is performed. for instance, you can direct an mp3 file to ~/music/country/some-song.mp3. downloads take place in the foreground, with progress dots, thus locking up edbrowse until the download is complete. if you prefer, you can run downloads in the background by issuing the bg (background) command. this is especially useful for large files. you are notified when the download is complete. meantime you can continue to use edbrowse. no dots will be printed, as they would interfere with what you are doing., when prompted for the filename, hit return for the default file name as provided by the website, enter x to abort, enter space to read the data into memory, or type a different file name if you wish. if the file already exists, it is overwritten., type bgl to list your background download jobs, including those that have run to completion. upon exit, edbrowse will list any background downloads that are in progress. these continue to run, even after edbrowse exits, and they will print "download complete" messages when they finish., foreground downloads, or any internet fetch for that matter, prints progress dots, but you can suppress these with the pdq (progress of download quiet) command. another option is the pdc (progress of download by count) command. this prints megabytes downloaded and megabytes total. for instance, 17/235 means 17 megs received out of 235. these are decimal megabytes, not binary 0x100000 megabytes - there is only a slight difference., linelength = 1000, change the length of a printed line. the default is 500, and the minimum is 80. a line that exceeds its length is faithfully represented internally, but is truncated on the display, as indicated by trailing dots..., nojs = space.com, specify domains that don't need javascript. you can eliminate annoying error messages and speed up access by disabling javascript for certain websites. javascript will not be run on pages within these domains, nor will it be fetched from these domains., the above directive will also drop javascript from subdomains such as www.space.com., you can include a path or partial path after the domain, as in space.com/popups. this will block the popup ads that you don't want to see, which often generate edbrowse errors in any case. subdomains are not considered when a path is given; the domain must match exactly., jspool = 32, allocate this many megabytes for javascript use. the default is 32 meg, as shown above. the minimum is 2 and the maximum is 1000. a couple of youtube pages will consume 4 meg of javascript, so don't aim low unless you are just using edbrowse to edit files. if you spend all day browsing, you better aim high, because javascript could unceremoniously fail, across the board, if it runs out of space. however, edbrowse will continue to run, and the javascript engine will restart with the next browse command., novs = somesite.com, indicate hostnames for which ssl certificate verification should not be performed. this directive is useful for sites that use self-signed certificates, since these cannot be verified. it should probably not be used for anything serious, such as a site that is going to receive your credit card number., inserver = pop3.some-domain.com inport = 110 outserver = smtp.some-domain.com outport = 25, specify the machines and ports that you use to fetch mail and send mail respectively. you can use the fully qualified domain names, or aliases as defined in /etc/hosts. the ports shown here are standard, and usually correct. they are also default in edbrowse, so you need not set inport and outport unless they are different from that shown above. note, these keywords are only valid in the context of a mail account, as indicated by mail{}., a star in front of the port number, e.g. outport *465, means the socket is to be encrypted for security. when the smtp port is encrypted, login authentication is assumed. no other authentication method is implemented at this time., an arrow in front of the port number, e.g. outport ^587, encrypts the socket, but only after an initial handshake in the clear. this is the hotmail protocol, and it is as secure as *465; just different., use +587 to authenticate yourself without encryption. this is sometimes done when you are directly connected to the mail server and traffic is not flowing across the internet, but the server still wants to make sure you are you., secure, incoming and outgoing email connections are secure. this effectively puts stars in front of the port numbers, if ports are specified. if ports are not specified, the defaults change to reflect the secure connections. default pop3s is 995 and default smtps is 465., nofetch, do not fetch mail from this account through the -f option., login = eklhad password = secret, specify the login and password that edbrowse uses to fetch your mail., from = full name reply = john.smith@some-domain.com, these lines are added in to the emails that you send. they tell the recipient who you are, and how to reply. it is illegal to use these lines for deceptive purposes. make sure they identify you, and that the reply address is indeed one of your email accounts., adbook = /home/mylogin/.ebsys/address-book, when specifying recipients, you can use aliases instead of full email addresses. aliases are checked against your address book, a line oriented text file that is specified here. if your address book contains the line, fred : fred.flintstone@bedrock.us : 226 cobblestone way : 5553827, then you can use the alias fred, and edbrowse will substitute fred's email address when sending mail. only the first two fields in the address book are significant as far as edbrowse is concerned. other fields might hold phone/fax numbers, street address, anything you like., all well and good, but some websites have no respect for edbrowse, and no concern for internet accessibility. they won't even let you in the door unless you look like explorer or netscape or one of the major players. startpage.com, a front end to google, is one example. so what do we do? we lie of course., agent = lynx/2.8.4rel.1 libwww-fm/2.14 agent = mozilla/4.0 (compatible; msie 5.5; windows 98; win 9x 4.90), you can specify different agents in your .ebrc file, and activate them with the `ua' (user agent) command. if the following lines are in your .ebrc file, you can type ua1 to pretend to bee lynx, or ua2 to pretend to be mozilla. type ua0 to resurrect the standard edbrowse identification., this feature was written pre-javascript, and is not 100% compatible with the navigator object. navigator.useragent returns the correct string, according to the agent you select, but other aspects of the navigator object do not change with the agent, and they should., function:ud {   ,s/$// }, the new < command is suppose to remind you of redirection, i.e. read input commands from this macro. and macros can invoke other macros by using a < command in the body. almost any edbrowse command is fair game. a macro can fetch web pages from the internet, fill out forms, submit requests, and send mail., unlike many things in the unix world, macro names are case-insensitive. thus: dostuff, dostuff, dostuff, ad nauseum, are all equivalent. also, if you define a macro with the same name multiple times, the first definition wins. edbrowse silently ignores subsequent definitions., normally, edbrowse marches along, whether a command succeeds or not. however, you can tell a macro to stop if it encounters an error by using this syntax., function+hw {   /hello/p   /world/p }, the plus sign after the word function means each command in that function must succeed. if there is no line containing the word hello, the function stops. if there is such a line, then the function moves on, and looks for a line containing the word world., other than some indenting, the format is fixed and unforgiving. you cannot, for instance, put the opening brace on its own line, as k&r would suggest., these functions, or macros, can accept parameters. let's make the previous function a bit more general., function+hw {   /~1/p   /~2/p }, reproduce the earlier behavior by typing <hw hello world, or search for different lines by invoking <hw foo bar. the latter looks for a line containing foo and prints it, and if this succeeds it looks for a line containing bar and prints that. now let's build a more useful function, a shortcut to google search. the variable ~0 represents all the arguments together. in this case ~0 is the keywords you pass to google for your search., function+gg {   b http://www.google.com   /<>/ i=~0   /   /^about/+2 }, with this in place, you simply type `<gg kangaroo habitat' to find out where kangaroos live., finally, an edbrowse function can branch, based upon the success or failure of the previous command. use if(*) for success, and if(?) for failure. the ? is suppose to remind you of the question mark that you get when an edbrowse command fails. the following looks for a line containing foo, and if it finds one, it advances to the next line, and if that line contains bar, it deletes it., i deliberately used function+ instead of function: in the above example. normally the + will cause the function to abort if an edbrowse command fails. however, if the result of that command is used by a control statement, the function does not abort. this is similar to set -e in the shell, which causes the script to abort after a failed command, unless the result of the command is used by an if or while statement., other control statements include while(*) while(?) until(*) and until(?). the following deletes lines from the top of the file, as long as they contain foo or bar. it then deletes the blank lines at the top., you can use loop(100){ ... } to repeat a set of commands 100 times. this feature is not used very often., this is just a sample. put anything you like in your init script, or leave it out altogether if you are happy with edbrowse out of the box., we already discussed the relevant keywords for an email account. all you have to do is enclose them in mail{...}, like this., the "default" directive makes this account the default. one and only one account should be labeled default. if you do not specify an account when fetching or sending mail, the default account is used. beyond this, the default smtp server is always used to send mail, no matter which account you specify. if account #1 is default, and you send mail using account #3, the name and reply address from account #3 will be sent to the recipient, and if he replies, his reply will be sent to your third email account. however, the smtp server from your default account is used to physically transmit the message. there are technical reasons for doing this having to do with security. however, if an account has its sendmail stream encrypted, then security is not an issue, and we can use these settings to send and receive mail. here is a typical configuration for google's gmail., mail filtering, by sender and/or subject, is controlled by your config file as well. this will be described later, as part of the fetchmail client., this example handles an mp3 file, not an mp3 stream. see sample.ebrc for a more general plugin that passes either a stream or a file to a music player., if you have pulled down a file from the internet that ends in .mp3, or has an http content-type of audio/mpeg, it will automatically play, and print ok when done. it is the sound or music or audio instructions associated with the website. this autoplay feature can be disabled with the pg command that turns plugins on and off., if you have read an audio file into memory from your own computer, you can type `pb' to play the contents of the buffer. the data is put into a temp file under /tmp/.edbrowse, and them mpg123 is invoked. finally, you can play an mp3 file, or any plugin-enabled file, from directory mode. the g (go) command plays the file on the current line. this is very efficient; no need to read the file into memory or create a temporary file under /tmp., the command `pb' could mean process buffer,as well as play buffer. for instance, a plugin descriptor might unzip a zip archive., some plugins act upon a file, as described above, but others convert a file into something readable. these do not "play" the file; they are part of the browse command. such a plugin is indicated by the outtype attribute. set this to h if the output is in html, or t if the output is in text. with the following plugin in place, you can browse most pdf files and read them, whether they are on your own computer or on the internet. other plugins could convert rich text, word docs, open office docs, etc., note, there are pdf to text converters that skip the middle html step, but i wanted to preserve the functionality of any hyperlinks that might be embedded within pdf, so i thought it worthwhile going through html, even though it adds another step., most mail clients can automatically append a signature to outgoing email messages; edbrowse is no exception. in fact, you may have a different signature for each of your mail accounts. thus, you can use one signature for work email, and another for personal email. when sending mail from account n, edbrowse first checks for a file named .signaturen in your home directory. for example, when sending from account 2, edbrowse looks for .signature2. if that file is not found, edbrowse looks for a file named .signature in your home directory, appending its contents if it is found., the recipients, attachments, and subject must appear at the top of your file. the sm command is picky, so observe the following syntax carefully., the account line is optional. it tells edbrowse to use the first mail account specified in your .ebrc config file. if you don't include an account: line, edbrowse uses the default account, indicated by "default" in your .ebrc file., typing sm5 causes edbrowse to use account number 5. this overrides the account: line if there is one. it is often easier to type sm5 than to insert an account:5 line. note, sm-5 is the same as sm5, but the .signature file is not included. sometimes you want a different ending on your email for a particular situation., use the attach: lines to add attachments to your email. each line should specify a file to attach, and they must appear before the subject line. if the filename is simply a number, the corresponding edbrowse session is used instead. return to the earlier example, where we are trying to attach a hollyrock brochure. another way to do this is to switch to session 2 and read in the pdf file. this is a binary file, but that doesn't matter. don't try to edit it, just hold it in session 2. then switch back to session 1 and use the line attach:2., if you use attach:2, instead of attach:hollyrock-brochure.pdf, fred will notice one difference. the attachment is not prenamed for him. if he wants to save the attachment, he'll have to come up with a filename himself. other than that, the email looks the same., the alt: directive is almost the same as the attach: directive. if you use alt:, the attachment is not treated as an adjunct file. instead, it is an alternate representation of the same email. the mail client will use the alternate representation if it can. this is usually used to send multimedia email with hyperlinks and pictures etc. the primary email is in plain text, but the alternate attachment is in html or rich text. unless something is amiss, the user sees the alternate presentation, complete with graphics and hyperlinks. like attachments, the alt: line can refer to a file or an edbrowse session., as you may have guessed, the to: lines establish the recipients. please don't specify more than a few dozen recipients. some mail servers set a hard limit of 100 on the number of recipients. if you exceed this number, the remaining recipients simply don't get their mail. best to limit your "to:" lines to a couple dozen., remember that cc stands for carbon copy. this tells the recipient, in this case barney rubble, that he is receiving a copy of the email for his convenience; he need not respond. use bcc for blind carbon copy, so that each person does not see all the other email addresses., when specifying recipients, you can use aliases instead of full email addresses. aliases are checked against your address book, a text file that is specified in your .ebrc file. if your address book contains the line, fred : fred.flintstone@bedrock.us : 226 cobblestone way : 5553827, then you can simply write "to:fred" at the top of your file. only the first two fields in the address book are significant as far as edbrowse is concerned. other fields might hold phone/fax numbers, street address, etc. that's up to you., note that "reply to fred" is an alternate syntax for "to: fred"., some web pages include sendmail links. they look just like other hyperlinks, but they send email to the appropriate person. if you activate a sendmail link, you will be placed in a new editing session with the "to" and "subject" lines preloaded. if the url did not specify a subject, the subject is simply "hello". you will probably want to replace this with a better subject line. write your mail message and type `sm' to send it on its way. then type ^ to return to the web page you were looking at. note that the body of your email may also be preloaded with some default text, so be sure to check before you write and send., you can include attachments by placing "attach:" lines at the top of the file, assuming the recipient can handle these attachments. this might make sense when the sendmail link is asking for bug reports - you might attach a program and/or its output. yet this is somewhat unusual. most sendmail links expect a few sentences of feedback, and nothing more., some web forms are submitted via email, rather than a direct http transmission. edbrowse handles this properly. it shows you the destination email address, sends the mail through smtp, and tells you to watch for a reply. this reply could be an email response, or even a phone call if you provided your phone number in the form. but remember, nothing happens immediately. you are still on the same web page, still looking at the same submit button. don't push the button again! the mail has been sent, and you'll be hearing from the company in the next few days., edbrowse -m1 fred ^barney hollyrock-notice +hollyrock-brochure.pdf, the ^ in front of barney means he is a cc recipient. use "?barney" for bcc., files with a leading + are assumed to be attachments. a leading - indicates an alternate format, like this., edbrowse -m1 fred ^barney hollyrock-notice -hollyrock-graphical.html, remember, you can specify several mail accounts in your .ebrc file. the first account is indicated by index 1, as in -m1, and so on. you can make life easier with some aliases in your .bashrc file., the first thing it tells you is how many messages you have. if there are no messages it says "no mail", and exits. if there are unread messages, it shows each one in turn. for each message, it displays some header information (such as subject and sender) and the first page of text, and then presents a prompt. a '?' prompt means the message is complete - a '*' prompt means there is more text to read. you respond by hitting a key. keys have the following meaning., the last two commands, w and u, require a filename, which you enter. the reserved filename, "x" or "x", is essentially /dev/null, whence the mail message is discarded. you can save the mail message to x (discard) and still save the attachments. if the file is anything other than x, and edbrowse cannot write to the specified file, it asks you for a new filename., in practice, you might save a message with w, later realizing that you need something, such as a hyperlink or attachment, which is only available in the unformatted message. when you use the w command to write a formatted message to a file, edbrowse retains an unformatted copy as well. these copies are placed in the directory $home/.trash/rawmail, with file names consisting of 5 digit numbers. when you save a formatted message, you'll notice some text like "unformatted 12345" at the end of the file. this tells you where to find the original, unformatted message: $home/.trash/rawmail/12345. as mentioned previously, it's a good idea to run a weekly cron job to clean out the trash bin; if that cron job removes subdirectories, it will insure that raw mail does not accumulate indefinitely., when an html mail message is rendered, javascript is disabled. if you want to interact with this email message, you must save it unformatted to a file, finish your email session, edit that file, and type b to browse. now the html is active, as though you were looking at a web page on somebody's site., matchstring > destinationfile, actually the > is a bit misleading. if the file exists, the email is appended to the end; the file is not truncated. so perhaps we should use >>, but i didn't want to bother with the extra greater, over and over again., the destination file is interpreted relative to the mail directory, which is set in your config file. of course you can override with an absolute path if you wish., a mail filtering rule always occurs in the context of a filter block. for instance, if you wish to redirect mail from certain people, do this., you can specify the sender's name or his email address. it's not a bad idea to do both, in case he sends mail from some other account., notice that i didn't capitalize fred flintstone. matches are case insensitive., the file name "x" is special; it discards the mail entirely. you can use this to throw away mail from people who are constantly harassing you or sending spam., the last entry sends mail to -wod. the leading - is special; it means the mail should be saved to wod unformatted. this happens to be the word of the day from merriam webster. you can save it unformatted, then browse it, and click on {audio} to hear the word pronounced. if an email contains hyperlinks, you may want to save it unformatted so you can browse it later., you can also filter mail based on the to: field. this is useful if you have several mail accounts, or mail aliases that are forwarded to your primary account. here is a sample block., the third entry is a catchall address, saving any mail that is sent to that domain. since rules are applied in order, support requests are stored in a file called "support", sales are stored in a file called "sales", and all other emails sent to your business are stored in "business"., you can use catchall addresses in the fromfilter block as well. anything from this domain goes here., you can filter based on subject, using the subjfilter{...} block. this can close the door on the virus de jure. if a virus uses a subject line of "come kiss me", you can redirect "come kiss me" to x, and it's gone., you can also use this feature to block warnings from other isps, complaining that you sent them emails with virus attachments. you didn't, of course, because you run linux, and a nonstandard mail client to boot. your reply address was forged, so the virus warning was sent back to you, but you really had nothing to do with it. this is called backscatter. lines like this one can throw these spurious warnings away., subjfilter { come kiss me > x net integrator virus alert > x }, finally, the reply address is checked against your address book. if there is a match, the mail is saved in a file whose name is the email alias. consider a line in your address book that looks like fred:fred.flintstone@somedomain.com. when you receive email from this particular address, it is saved to the file fred. thus you don't have to enter and maintain redundant entries in the filter. there is no need to include fred.flintstone@somedomain.com > fred. it's taken care of by your address book., if you want to save mail from fred unformatted, place a minus sign, i.e. -fred, in your address book. this is the same convention as the from filter. if you don't want mail from fred to be redirected, but you still want to use the alias fred when sending mail, place an exclamation mark at the start, i.e. !fred., if an email is redirected to a file, and it includes attachments, edbrowse will ask you what to do with those attachments, as though you had used the w command to save the mail yourself. if your friend has send you a program (attached) that he wants you to look at, just hit return to save it to the default filename. if your friend's mail has some kind of logo, or background image, that you don't care about, type x and it will go away. if the image has a recognizable suffix, such as gif, i discard it automatically. if you really want these images, you'll have to save the email unformatted and browse it later. when browsing an email inside the editor, edbrowse offers you all the attachments, be they images or not. you can discard a single attachment by entering x, or all the image attachments by entering capital x., use the -p option to pass over the filters, as in `e -pm1'. i set this when looking at other people's mail, such as my wife's account. i don't want her mail sent somewhere else because it matches one of my filter rules., the "subject:" line must also be present. this too is created when the email is formatted. after the re command is issued, the subject may move down the page, to make room for other email headers as follows., if this email has just been browsed, and the unformatted data still exists within the current edbrowse session, or if this same data is available in the database file maildir/.reply, then re inserts the message id of the original email. this should be part of the reply. the resulting lines might look like this., reply to somebody@foo.bar.com references: <4387a55e6af43c4f9830c74efece9132022d0638@foo-bar.net> subject: what's in a name?, the reference line is not a line you should ever type in, edit, or delete. just leave it be. if you participate in a discussion list, this line is important. it tells the server that your reply is indeed a reply and that it should be linked to the referenced message. using this information, the server maintains discussion threads. if you delete this line before sending your response, you will create a new thread, and that will only confuse and annoy the other participants. so - if you are going to reply to a message on a discussion list, make sure the re command inserts the references: line, and then leave it alone. edit the body of the email, add your comments, and send., sometimes the references line will have two ids separated by white space. the first is the beginning of the thread, the message that started this topic, and the second is the comment that you are replying to directly. again, this helps list servers organize the emails into threads., the command `rea' means reply to all, and this also uses the original email data. all the recipients will appear at the top of your file. some will be indicated by cc, if they were carbon copied. you can delete any of these recipients before sending your response. of course you probably don't want to delete the first line, as that is the reply to address., if the email was unformatted, and you have typed b to browse it, the re command takes the file out of browse mode and turns it into a plain text file. this supports text editing, to write your reply in the body of the message. if you want to start over from scratch, you can't just unbrowse, because it is not in browse mode. you must re-edit the saved mail message, browse, and reply. like everything else in edbrowse, you'll get use to it once you play with it., if this is the third mail entry in your config file, then you access this account by `edbrowse -f3'. this does not simply fetch all the emails down to your local computer, as is the case with a pop3 account. rather, edbrowse provides access to all the emails on the imap server in an interactive fashion. here is a sample screenshot., type 6, or spam, or just spa, and edbrowse takes you through the 7 messages in the spam folder. it prints the sender, subject, date, and size of each email, and asks you what to do, similar to the pop3 client interface. type q to quit, n for the next message, d to delete, or m to move this message to another folder. again, you can specify the destination folder by number or by name. type space to read the body of the email, and keep typing space, like more or less, to read as much of the email as you wish. type w to write the email formatted, or w to write and delete. type u or u to save the email unformatted. type a to save the attachments. type l to change the fetch limit, i.e. the number of emails that are presented at one time. type / to search for emails by subject, by sender, or by the text in the body of the email. finally type h for the help message, which looks like this., on some servers, such as gmail, you can't delete an email from the "all mail" folder. instead you must move it to trash and then delete it from there., the search is case insensitive, and often looks for words, rather than simple substrings. thus foo matches foo, but does not match foobar. the implementation will depend on your imap server. the default is to search through subjects. type `f smith' to search for mail from smith, or `b neutron star' to find all emails that talk about a neutron star. if there are thousands of matches, only the last 100 are shown. you can change this limit with the l command., e customers], this allows you to bring in the entire table, or portions thereof, one row per line, with fields delimited by pipes. if the result looks like a bunch of numbers and pipes, and you have forgotten the structure of the table, use the shc (show columns) command. the output might look like this., the first column is a unique number that designates this particular customer. after all, two customers could have the same first and last name, and even the same birthdate. serial numbers are always a good idea, and that usually becomes the primary key. this is indicated by a star just before the column name. when edbrowse changes or deletes a record, the primary key is used. i assume, at all times, that the key determines a unique record in the database, and that each record appears at most once in an editing session. you could read customer 37 in twice, thus having two copies in your buffer, but don't do it!, note that edbrowse can support a primary key with two or three columns, such as a serial number and a modifier. more than three key columns are not supported. if the primary key comprises more than three columns, or if the table has no primary key, you will not be able to update or delete. rows in the table are readonly., the table syntax is more than just an identifier and a right bracket. you can follow the right bracket with a where clause. this is important if you don't want the entire table, especially if there are millions of rows. here are some table commands and their meanings., customers] set the buffer up for the customers table, but don't fetch any rows., customers]* fetch all the rows in the table., customers]37 fetch the customer whose serial number is 37. the primary key is assumed; your table has to have a primary key if you are going to use this syntax., customers]1=37 fetch the row whose first column is 37., customers]37-59 fetch the customers with serial numbers between 37 and 59 inclusive., customers]3=smith fetch the customers whose last name is smith., customers]lastname=smith same as above., customers]last=smith same as above. if the string uniquely gloms onto a column name, we're all set., customers]last=barn* fetch the customers whose last names begin with barn., customers]birth=01/01/1960-12/31/1960 fetch the customers who were born in 1960., it is usually best to edit with a blank template, i.e. without a where clause. then you can read in whatever rows you like. type an r before any of the strings shown above to read rows into your buffer. note, you cannot read data from different tables into the same buffer, but you can switch to another editing session to look at another table without losing the rows you are working on., when reading rows into a growing buffer, you can usually omit the table, since it has to be customers] every time. for instance, you can bring in customer #738 by typing `r customers]738' or `r 738'., if you want a clean slate, type `rf' to refresh the buffer. this brings you back to a template for the table with no rows. warning - do not clear your buffer by deleting all the rows, as that will delete the corresponding entries in the database. this feature works just like directory mode - your edits are translated into actions in the real world, so be careful! referential integrity might save you from this accidental delete disaster, if you routinely use this sql feature to link tables together, which is a good idea at many levels. but don't rely on it!, now, how about the seventh column in our example, the one called "picture"? this is the customer's picture, a jpg image that is in binary, and cannot be easily folded into an editing session. instead, it is stored in another buffer, e.g. buffer 9, and this is indicated by <9>. you can switch to session 9 and save the file, or throw it away., 2139|fred|flintstone|08/21/1969|m|foo@bar.bar.com|<9>, binary columns are not fetched by default. you usually don't want them anyways. to fetch binary columns, use the fbc command. it is not possible to fetch more than one binary column at a time, so make sure your select only grabs one such column., datasource = retail,mylogin,mypassword, this can be changed at run time by the ds= command. make sure you do not refer to any old rows in buffer after you have switched to a new data source., in some cases you can access other databases without changing the data source. for instance, you can read the parts table in the inventory database by calling up inventory:parts]. this is standard sql syntax for looking at tables in another database; edbrowse just passes it through., adding database rows is substantially different from adding text. since a row may contain a dozen fields, and you may not remember what goes where, edbrowse prompts you for each field in turn. it also checks the integrity of each field as you go, e.g. a date has to look like mm/dd/yyyy etc. if a row cannot be added because of a database error, edbrowse prints the error and data entry continues, giving you a chance to reenter the row. data entry stops when you enter a period all by itself, no matter what field you are on. the rows that were entered successfully will be present in your buffer, and the current line is the last entered row. blobs cannot be entered at this time., a row appears as you typed it; and this may differ from the actual values in the database. for instance, you might put a null into a field that is "default 3". within the database, the value is 3, but there is nothing in that field in your buffer. another field might truncate a floating point number, according to the precision of that column. another field might be type serial, and turn 0 into the next serial number. and then there are triggers. there are many ways data can be modified as it enters the database. it would be better to refresh each row as it is inserted, so you could see exactly what is there, but this is not implemented yet. remember, you can always type `rf' to get an empty buffer, and then reread the rows you just inserted., if the first column of the primary key is an integer, and you enter a 0, edbrowse selects the next number in sequence. some databases do this internally, some don't, thus it is done at the front end. there is a possible race condition here, if you and somebody else glom onto the same serial number, but it's not likely, and it will create a "duplicate key" error in any case., use the substitute command to update a row. make sure you don't accidentally introduce an additional pipe, or remove a pipe. key columns cannot be modified. if you are updating many rows with one command, through a range or through g//s, and an error occurs while updating the database, substitution stops in its tracks. the editing session will reflect the database, with some rows changed and others untouched. there are many reasons for these update errors, including datatype mismatch (e.g. pushing an integer into a date field), and check constraints (e.g. putting j in for sex instead of m or f). if you have any say in the database design, apply check constraints wherever they make sense. they will protect you from erroneous substitutions that would produce inconsistent data., delete works as you would expect; delete a row, and the corresponding entry disappears. there is no undo command. it couldn't be done in any case, since you may have selected only part of the row (see below), and i wouldn't have all the data to put the row back. as mentioned before, referential integrity should be employed wherever it makes sense. as a last check, i only let you delete 100 rows at a time. be careful, and run regular backups., when inserting a row through one of these descriptors, you are only specifying a subset of the columns in the table. the other columns will be null, or they will take on their default values as specified by the schema. if you receive a not-null error, it could be due to one of the other columns, which requires an entered value. it is usually safer to insert a row using the complete table., canned queries can be saved in a file for future use. call them up, modify parameters, and go again, like a qbe screen., ] select * from customers, address where custnum = addrnum and addrtype = "home" and custnum between 500 and 600;, return to top][edbrowse documentation, a user's guide, chapter 0, contents, chapter 1, preface, maintainer, author, copyright notice, disclaimer, acknowledgements, overview, other languages, chapter 2, quick reference guide, quick reference guide, tips for avoiding line numbers, mailing list, edbrowse wiki, chapter 3, the editor, important deviations from /bin/ed, balancing braces, context switch, usage, binary characters, binary files, directory scan, file manager, upper/lower case, break line, race conditions, chapter 4, web browser, accessing a url, browse mode, technical, math, title, description, keywords, the refresh command, hyperlinks, internal links, the back key, the m command, background music, input fields, data entry, text areas, push the button, web and email addresses, cookies, secure connections, ftp retrievals, proxy servers, frames, chapter 5, javascript, introduction to javascript, validating forms, popups and popunders, onchange and undo, javascript debugger, chapter 6, edbrowse scripts and the configuration file, config file, keyword = value, user agent, edbrowse functions, the init script, mail accounts, plugin descriptors, a sample config file, chapter 7, mail client, send mail, send mail client, retrieving mail, interactive mail reader, formatted mail, mail filtering, mail reply, imap client, chapter 8, database access, building edbrowse with database access, reading tables, data source, insert, update, delete, table descriptors, go sql]edbrowse documentation[nov, may, 2016, 2018][maintainer, author, copyright notice, disclaimer, acknowledgements, overview, other languages, quick reference guide, tips for avoiding line numbers, mailing list, edbrowse wiki, important deviations from /bin/ed, balancing braces, context switch, usage, binary characters, binary files, directory scan, file manager, upper/lower case, break line, race conditions, accessing a url, browse mode, technical, math, title, description, keywords, the refresh command, hyperlinks, internal links, the back key, the m command, background music, input fields, data entry, text areas, push the button, web and email addresses, cookies, secure connections, ftp retrievals, proxy servers, frames, introduction to javascript, validating and modifying forms, popups and popunders, onchange and undo, javascript debugger, the config file, keyword = value, user agent, edbrowse functions, the init script, mail accounts, plugin descriptors, a sample config file, send mail, send mail client, retrieving mail, interactive mail reader, formatted mail, mail filtering, mail reply, imap client, building edbrowse with database access, reading tables, data source, insert, update, delete, table descriptors, go sql, lines beginning with # are ignored, making it easier to comment your edbrowse scripts. the # character has no special significance in the middle of a line., lines beginning with ! implement a shell escape. the ! character has no special significance in the middle of a line. the ! alone spawns an interactive subshell - type exit to return to edbrowse. the work "ok" is printed when the shell command is finished - thus you can tell when a no-output command is done., type `cd dirname' to change directories. the new directory is always printed. type cd alone to find out where you are. unlike bash, edbrowse does not retrace your steps back through symbolic links. thus .. is always the physical parent directory. if the string contains $ [] * ? or a leading ~, environment variables are expanded, and globbing is performed. thus cd ~/work takes you to the work directory under your home directory. this command does not change any filenames that may be active. you can edit foo, cd .., and write, and foo will be copied to the parent directory. that's probably not what you want, so be careful when changing directories., r operates on the current line by default, rather then the last line. use $r to read a file at the end of your working text., the w+ command appends to the file. some versions of ed use w> for this operation, but for 40 years > has been the industry standard for write with truncate, so using > for append is somewhat confusing. and w>> is just too clunky, so i use w+., w/ writes the data into a file whose name is the last component of the current file name. this is useful when you've just downloaded this.that.com/foo/bar/package-2.7.7-22.tar.gz, and you want to write the file locally, but don't want to retype the stuff at the end. alternatively, f/ changes the filename, keeping only the last component., whenever a file is read from or written to disk, $var, in the filename, is replaced with the corresponding environment variable. thus you can edit your address book at any time via `e $adbook', provided $adbook has been set in your environment. constructs such as ${foo}bar are supported. also, a leading ~/ is replaced with $home/, making it easy to edit files in your home directory such as ~/.profile. or use ~user for another user's home directory. shell meta characters are expanded, provided the result is one file name. you can read or write a file by typing a minimal portion of its name. neither $variables nor stars are expanded for files on the command line, as this expansion is already done for you by the unix shell. windows users should compile using the setargv.obj utility, which performs wildcard expansion on command line arguments. thus you should be able to edit *.c in any operating system and get all the c source files in the current directory. variable substitution and globbing of filenames can be completely suppressed by a leading backquote. if you really want to read a file called *a?, type r `*a?. you can escape an individual shell meta character with the backslash, as in fun*house., many versions of ed place a $ at the end of a listed line, but this is not one of them, at least not by default. use the command `el' to place end markers around listed lines. listed lines begin with ^ and end with $. enter `ep' to place end markers around all printed lines. use `eo' to turn end markers off., capital q does not quit the editor absolutely. this is because i often hit caps lock by mistake, or even shift q by mistake, and if i've forgotten about some important changes that i've made, those changes are gone! this seems contrived, like it would never happen, but it does, so i disabled capital q. type qt to quit absolute., capital j joins lines together with spaces between them., x (encryption) is not implemented., p (prompt) is not implemented., missing line numbers before or after the comma are assumed to be 1 and $. this is consistent with ,p -- to print the entire file., you cannot enter one command across two physical lines by putting a backslash at the end of the first line. and there's no need to in any case, because perl supports 
 translation. to split a line in the middle of the word doghouse, type: s/doghouse/dog-
house/, only the first 500 characters of a line are displayed. the rest of the line is in the buffer, and can even be modified via a substitute command, but if you want to see it, you will need to split it, as in the doghouse example above. you can change the number of characters displayed by setting the linelength parameter in your config file, or by the ll command., a+ adds text, like a, but also adds the line you last typed, when you thought you were in append mode, but you weren't., this program is less tolerant of whitespace than /bin/ed. 57 , 63 p will not fly., a single % on the right hand side of a substitution is replaced with the last right hand side. some versions of ed do this, some don't., s, is shorthand for s/, +/,
 this is used to split lines at phrase boundaries. you can also use s. to split a line after the first period -- at a sentence boundary. s; s: s) and s" can also be used. s,3 splits the line after the third comma. you might need to use s.2 if the sentence begins with mr. flintstone., type s by itself for s//%., the commands sg and sl make the remembered substitution and replacement strings global and local respectively. if you want to look at all instances of "foo" in all the files in the current directory, and change some of them to bar at your discretion, edit *, then enter sg to make substitution strings global to all edit sessions. in the first session, search for foo, and replace some of them with bar. type e2 to move to the next session, whence you can search using slash alone, because the string "foo" is applied to all sessions. similarly, you can use % to refer to "bar". the sl command returns this editor to its local behavior, where each file has its own search/replace strings., errors associated with reading or writing files, or switching sessions, are always printed. other errors elicit the usual question mark, whence you must type h to read the explanation. type capital h if you always want to see the error messages., in most versions of ed, the command z7 means .,+6p, making the current line +7. this is inconsistent, having one and only one ed command that leaves dot somewhere other than the last line printed. the confusion is compounded when z prints the last lines in the file, whence dot actually is the last line printed. in this program z7 means +,+7p, and the current line becomes the last line printed, just like the other commands you know and love. without a number, z prints the previous number of lines. thus you can read your file a chunk or screen at a time., efficiency. the proxy server may be able to store previously-accessed webpages (known as caching). if your connection to the proxy is faster than your connection to the rest of the internet, then caching insures that frequently-accessed web pages load quickly., policies. some firewall administrators require their users to use a proxy server., anonymity. there are so-called anonymizing proxy servers that hide your ip address from the websites that you browse., define an option using the keyword=value syntax., define an edbrowse script that can be invoked from the command line or from another script., an edbrowse command, that becomes part of an edbrowse script., establish an email account. this will be described later, under email clients., a mail filtering rule., describe a plugin., describe a table or a view in an sql database.]